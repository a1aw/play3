(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,a){var n=a(24),r=a(109);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1},s=(n(e.i,r,i),r.locals?r.locals:{});e.exports=s},109:function(e,t,a){(t=a(25)(!1)).push([e.i,"body {\r\n    width: 100%;\r\n    height: 100vh;\r\n    position: absolute;\r\n    background-color: rgb(229, 229, 229)\r\n}\r\n\r\n.party-list {\r\n    margin: 4px;\r\n    position: absolute;\r\n    top: 4px;\r\n    right: 4px;\r\n    text-align: right;\r\n}\r\n\r\n.hori-scroll {\r\n    margin: 4px;\r\n    overflow: auto;\r\n    white-space: nowrap;\r\n}\r\n\r\n.hori-scroll button {\r\n    margin: 4px;\r\n}\r\n\r\n.playground {\r\n    padding: 8px;\r\n}\r\n\r\n.loading {\r\n    margin-top: 1rem;\r\n}\r\n\r\n@media only screen and (max-width: 768px) {\r\n    nav {\r\n        margin-top: env(safe-area-inset-top);\r\n    }\r\n\r\n    .party-list {\r\n        margin-top: env(safe-area-inset-top);\r\n    }\r\n\r\n    .modal {\r\n        padding-top: env(safe-area-inset-top);\r\n        padding-bottom: env(safe-area-inset-bottom);\r\n    }\r\n\r\n    .playground {\r\n        padding-top: env(safe-area-inset-top);\r\n        padding-bottom: env(safe-area-inset-bottom);\r\n    }\r\n}\r\n\r\n/* Touch Keypad */\r\n\r\n.touch-keypad {\r\n    position: fixed;\r\n    left: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    margin: 0px;\r\n    padding: 0px;\r\n    z-index: 2;\r\n    background: rgba(255, 255, 255, 0.4);\r\n    padding-bottom: env(safe-area-inset-bottom);\r\n}\r\n\r\n.touch-keypad .btn-group-vertical {\r\n    width: 100%;\r\n}\r\n\r\n.touch-keypad .numeric-keypad {\r\n    width: 75%;\r\n}\r\n\r\n.touch-keypad-key {\r\n    min-height: 58px;\r\n}",""]),e.exports=t},110:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(11),s=a.n(i),o=a(26),l=a.n(o),c=a(117),u=a(112),d=a(54),m=a(119),y=a(118);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var p=function(e){var t,a=h(r.a.useState(!1),2),n=a[0],i=a[1],s=[];for(t=e.min;t<=e.max;t++)s.push(r.a.createElement("option",{key:t},t));n||(n=e.min);var o=[];for(t=1;t<=n;t++)o.push(r.a.createElement(u.a,{className:"mb-3",key:t},r.a.createElement(u.a.Prepend,null,r.a.createElement(u.a.Text,{id:"player-number-"+t},"Player ",t)),r.a.createElement(d.a,{placeholder:"Player "+t,"aria-label":"Nickname","aria-describedby":"player-number-"+t,id:"player-nick-"+t})));return r.a.createElement(c.a,{show:e.show,animation:!1,backdrop:"static"},r.a.createElement(c.a.Header,null,r.a.createElement(c.a.Title,null,"Setup Players")),r.a.createElement(c.a.Body,null,r.a.createElement("p",null,"This game requires at least ",e.min," player(s) and at maximum ",e.max," player(s). Please enter the names for the players below:"),r.a.createElement(y.a.Group,null,r.a.createElement(y.a.Label,null,"Players:"),r.a.createElement(y.a.Control,{as:"select",id:"localPlayersSelect",onChange:function(){var e=document.getElementById("localPlayersSelect").value;i(e)}},s)),o,r.a.createElement(m.a,{variant:"success",block:!0,onClick:function(){var t,a,r=[];for(t=1;t<=n;t++)""===(a=document.getElementById("player-nick-"+t).value)&&(a="Player "+t),r.push(a);e.onComplete(r)}},"Continue")),r.a.createElement(c.a.Footer,null,r.a.createElement("p",null,"Application licensed under the GPLv3 Public License.")))},f=function(e){return r.a.createElement(c.a,{show:e.show,backdrop:"static"},r.a.createElement(c.a.Header,null,r.a.createElement(c.a.Title,null,"Pass to ",e.playerName)),r.a.createElement(c.a.Body,null,r.a.createElement("p",null,"It is ",r.a.createElement("b",null,e.playerName),"'s turn! Pass the device and let ",e.playerName,' to press the "Continue" button.'),r.a.createElement(m.a,{variant:"success",block:!0,onClick:e.onContinue},"Continue")),r.a.createElement(c.a.Footer,null,r.a.createElement("p",null,"Application licensed under the GPLv3 Public License.")))},v=function(e){return r.a.createElement(c.a,{show:e.show,backdrop:"static"},r.a.createElement(c.a.Header,null,r.a.createElement(c.a.Title,null,"Keypad or keyboard?")),r.a.createElement(c.a.Body,null,r.a.createElement("p",null,"Please select either to use keypad or keyboard for input:"),r.a.createElement("div",{className:"d-flex"},r.a.createElement(m.a,{block:!0},r.a.createElement("i",{className:"fas fa-keyboard"}),r.a.createElement("br",null),"Keyboard"),r.a.createElement(m.a,{block:!0},r.a.createElement("i",{className:"fas fa-gamepad"}),r.a.createElement("br",null),"Keypad"))),r.a.createElement(c.a.Footer,null,r.a.createElement("p",null,"Application licensed under the GPLv3 Public License.")))},g=a(113);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=function(e){function t(e,a){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=E(this,w(t).call(this,e))).gameId=a,n.state={turnPlayer:!1,loading:!0,loadingMsg:"Loading playground",keypad:!0},n.props.client.on("party",n.partyEventListener=function(e){"startGame"===e.event?n.startGame():"nextTurn"===e.event&&(n.setState({turnPlayer:e.player}),e.player.id===n.props.client.player.id&&n.myTurn())}),n.props.client.on("game",n.gameEventListener=function(e){n.response(e)}),n}var a,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),a=t,(n=[{key:"bootDone",value:function(){this.props.onBootDone()}},{key:"request",value:function(e){this.props.client.gameRequest(e)}},{key:"response",value:function(e){this.onResponse(e)}},{key:"onResponse",value:function(e){console.warn("No response handler handling responses from server."),console.warn(e)}},{key:"unregisterEventListener",value:function(){this.props.client.off("game",this.gameEventListener),this.props.client.off("party",this.partyEventListener)}},{key:"componentDidMount",value:function(){this.enable()}},{key:"componentWillUnmount",value:function(){this.disable(),this.unregisterEventListener()}},{key:"isSetupComplete",value:function(){return!0}},{key:"setupLocalPlayers",value:function(e,t){this.setState({loadingMsg:"Setting up local players",minPlayers:e,maxPlayers:t,setupLocalPlayers:!0})}},{key:"getTurnPlayer",value:function(){return this.state.turnPlayer}},{key:"isMyTurn",value:function(){return this.state.turnPlayer&&this.props.client.player.id===this.state.turnPlayer.id}},{key:"myTurn",value:function(){}},{key:"startGame",value:function(){}},{key:"leave",value:function(){this.disable(),this.props.onDisable(),alert("TODO: Leave"),window.location.reload()}},{key:"endGame",value:function(){this.disable(),this.props.onDisable()}},{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"renderPlayground",value:function(){}},{key:"render",value:function(){var e,t=this,a=this.props.party.players,n=[];for(e=0;e<a.length;e++)n.push(r.a.createElement("div",{key:a[e].id},r.a.createElement("span",{className:this.props.client.player.id===a[e].id?"font-weight-bold":""},this.state.turnPlayer&&this.state.turnPlayer.id===a[e].id?"➡️ ":"",a[e].name),r.a.createElement("br",null)));return r.a.createElement("div",{className:"container-fluid playground"},this.state.loading&&r.a.createElement("div",{className:"loading d-flex align-items-center justify-content-center"},r.a.createElement("center",null,r.a.createElement(g.a,{animation:"border"}),r.a.createElement("br",null),r.a.createElement("span",null,this.state.loadingMsg))),this.isSetupComplete()&&this.renderPlayground(),this.state.selectKeypadKeyboard&&r.a.createElement(v,{show:!0}),this.state.setupLocalPlayers&&r.a.createElement(p,{min:this.state.minPlayers,max:this.state.maxPlayers,show:this.state.setupLocalPlayers,onComplete:function(e){console.log(e),t.players=e,t.setState({setupLocalPlayers:!1,loadingMsg:"Loading playground"}),t.enable()}}),this.state.waitPlayer&&r.a.createElement(f,{show:this.state.waitPlayer,playerName:this.state.playerName,onContinue:function(){t.setState({waitPlayer:!1}),t.nextTurn()}.bind(this)}),n&&r.a.createElement("div",{className:"party-list"},r.a.createElement("h4",null,"Party"),n))}}])&&k(a.prototype,n),i&&k(a,i),t}(r.a.Component),P=a(27),I=a.n(P),N=(a(52),a(17)),x=a.n(N),R=a(37),T=a.n(R),B=a(114),O=function(e){return r.a.createElement(c.a,{show:e.show,onHide:e.onHide},r.a.createElement(c.a.Header,{closeButton:!0},r.a.createElement(c.a.Title,null,"Game Over")),r.a.createElement(c.a.Body,null,"The winner is ",r.a.createElement("b",null,e.winner),". You will be redirected back to the party dialog very soon."),r.a.createElement(c.a.Footer,null,r.a.createElement(m.a,{variant:"secondary",onClick:e.onHide},"Close")))};a(94);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(a=!(r=A(t).call(this,e,"bigtwo"))||"object"!==L(r)&&"function"!=typeof r?M(n):r).fc=new I.a,a.onPassBtnClicked=a.onPassBtnClicked.bind(M(a)),a.onSubmitBtnClicked=a.onSubmitBtnClicked.bind(M(a)),a}var a,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,e),a=t,(n=[{key:"enable",value:function(){var e=this;this.setState({loading:!1}),this.bootDone(),window.addEventListener("resize",this.resizeEventListener=function(){e.resizeBoard()}),window.addEventListener("orientationchange",this.orientationChangeEventListener=function(){e.resizeBoard()}),this.resizeBoard(),this.deck=!1,this.spreadCardsDone=!1}},{key:"disable",value:function(){window.removeEventListener("resize",this.resizeEventListener),window.removeEventListener("orientationchange",this.orientationChangeEventListener),clearTimeout(this.timeout)}},{key:"resizeBoard",value:function(){var e=window.innerWidth/1600;document.getElementById("playingcards-board").style.transform="scale("+e+", "+e+")"}},{key:"onResponse",value:function(e){var t=this;if(console.log("Response"),console.log(e),"newDeck"===e.event)this.deck=this.fc.jsonToDeck(e.deck),console.log("New deck recevied"),this.updateAvailableCombinations(),this.spreadCardsDone||this.spreadCards();else if("updateDeck"===e.event)console.log("Deck update recevied"),this.myTurnCards=e.cards,this.updateDeck(),this.updateAvailableCombinations();else if("numberOfCards"===e.event)this.numberOfCards=e.numberOfCards,this.updateNumberOfCards();else if("gameReady"===e.event)this.setState({displayWaitingPlayers:!1}),this.isMyTurn()&&(this.removePlayerLastCards(this.props.client.player),this.setState({displayBottomPlayerPassed:!1,displayTurnButtons:!0}));else if("lastCards"===e.event){this.setState({passBtnDisabled:!1}),this.lastPlayer=e.player,this.setPassed(e.player,!1);var a=this.fc.jsonToDeck(e.cards);this.lastCombination=T()(a),this.lastPlayer.id!==this.props.client.player.id&&(this.removePlayerLastCards(this.lastPlayer),this.showPlayerLastCards(this.lastPlayer,a)),this.sendGameReady()}else if("lastPassed"===e.event)this.setPassed(e.player,!0),this.removePlayerLastCards(e.player),this.sendGameReady();else if("gameOver"===e.event){var n,r=e.playerDecks;for(var i in r)n=this.getPlayerById(i),this.setPassed(n,!1),this.removePlayerLastCards(this.lastPlayer),this.showPlayerLastCards(n,r[i],!0);this.setState({winner:e.winner}),this.timeout=setTimeout((function(){t.setState({displayWinner:!0}),t.timeout=setTimeout((function(){t.endGame()}),7e3)}),3e3)}else e.event&&e.event.endsWith("Failed")&&alert("Code: "+e.code+"\nError: "+e.msg)}},{key:"getPlayerById",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,i=this.props.party.players[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var s=r.value;if(s.id===e)return s}}catch(e){a=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}return!1}},{key:"setPassed",value:function(e,t){var a=this.playerCardsMap[e.id];"left-cards"===a?this.setState({displayLeftPlayerPassed:t}):"right-cards"===a?this.setState({displayRightPlayerPassed:t}):"top-cards"===a?this.setState({displayTopPlayerPassed:t}):"bottom-cards"===a&&this.setState({displayBottomPlayerPassed:t})}},{key:"updateDeck",value:function(){document.getElementById("cards-container"),this.unselectAllCards();var e=document.getElementsByClassName("bottom-cards");console.log("old deck"),console.log(this.deck),console.log("My turn cards"),console.log(this.myTurnCards);var t,a=[];for(t=0;t<this.myTurnCards.length;t++)a.push(this.myTurnCards[t].index);var n=[];for(t=0;t<this.deck.length;t++)a.includes(t)||n.push(this.deck[t]);this.deck=n,console.log("Indexes"),console.log(a),console.log("new deck"),console.log(this.deck);var r,i,s=-.5*(6.25*this.deck.length+.52*(this.deck.length-1)),o=0,l=[];for(t=0;t<e.length;t++)i=e[t],r=parseInt(i.getAttribute("data-card-index")),console.log("=========== ELEMENT "+t+" INDEX "+r),a.includes(r)?(console.log("Removing: "+i.style.backgroundImage),l.push(i)):(console.log("Keeping "+i.style.backgroundImage),u=this.deck[o],console.log("card"),console.log(u),console.log("new index:"+o),c=s+6.77*o,i.setAttribute("data-card-index",o),i.style.transition="all 0.5s",i.style.transform="translate("+c+"em, 15.92em)",i.style.backgroundImage="url(../../img/playingcards/".concat(u.rank,"_of_").concat(u.suit,".svg)"),console.log("New image "+i.style.backgroundImage),o++);var c,u,d=3.125*(l.length+1)*.5;for(t=0;t<l.length;t++)c=3.125*t-d,u=this.myTurnCards[t].card,l[t].classList.add("shown-cards"),l[t].style.transition="all 0.5s ease-in-out",l[t].style.transform=" translate("+c+"em, 5.705em)",l[t].style.backgroundImage="url(../../img/playingcards/".concat(u.rank,"_of_").concat(u.suit,".svg)")}},{key:"sendGameReady",value:function(){this.request({event:"gameReady"})}},{key:"sendPass",value:function(){this.request({event:"pass"})}},{key:"sendTurn",value:function(e){this.request({event:"turn",cards:e})}},{key:"startGame",value:function(){this.deck&&this.spreadCards(),this.setState({passBtnDisabled:!0})}},{key:"updateNumberOfCards",value:function(){var e=["left","top","right"];this.playerInfoMap={},this.playerCardsMap={};var t,a,n,r,i=this.props.party.players,s=-1;for(t=0;t<i.length;t++)if(i[t].id===this.props.client.player.id){s=t;break}for(t=1;t<4;t++)a=i[(s+t)%4],(n={})[r="playerInfo"+t]=3!==t?a.name+" ("+this.numberOfCards[a.id]+")":"("+this.numberOfCards[a.id]+") "+a.name,this.setState(n),this.playerInfoMap[a.id]=r,this.playerCardsMap[a.id]=e[t-1]+"-cards";this.playerCardsMap[this.props.client.player.id]="bottom-cards"}},{key:"removePlayerLastCards",value:function(e){var t=this.playerCardsMap[e.id];console.log("Removing for "+t+" from "+e.name);var a,n=document.getElementById("cards-container"),r=document.getElementsByClassName("shown-cards"),i=[],s=!0,o=!1,l=void 0;try{for(var c,u=r[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value;console.log(d),d.classList.contains(t)&&(console.log("removing"),i.push(d))}}catch(e){o=!0,l=e}finally{try{s||null==u.return||u.return()}finally{if(o)throw l}}for(a=0;a<i.length;a++)n.removeChild(i[a])}},{key:"showPlayerLastCards",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.removePlayerLastCards(e),document.getElementById("cards-container");var n,r=this.playerCardsMap[e.id];if("left-cards"===r)for(n=document.getElementsByClassName("left-cards"),o=0;o<t.length;o++)l=3.125*o-35.42+(a?-8.33:0),c=t[o],n[o].classList.add("shown-cards"),n[o].style.transition="all 0.5s ease-in-out",n[o].style.transform=" translate("+l+"em, 0em)",n[o].style.backgroundImage="url(../../img/playingcards/".concat(c.rank,"_of_").concat(c.suit,".svg)");else if("top-cards"===r){n=document.getElementsByClassName("top-cards");var i=(a?-10.215:0)-5.705,s=3.125*(t.length+1)*.5;for(o=0;o<t.length;o++)l=3.125*o-s,c=t[o],n[o].classList.add("shown-cards"),n[o].style.transition="all 0.5s ease-in-out",n[o].style.transform=" translate("+l+"em, "+i+"em)",n[o].style.backgroundImage="url(../../img/playingcards/".concat(c.rank,"_of_").concat(c.suit,".svg)")}else if("right-cards"===r){var o,l,c;for(n=document.getElementsByClassName("right-cards"),o=0;o<t.length;o++)l=35.42-3.125*o+(a?8.33:0),c=t[o],n[o].classList.add("shown-cards"),n[o].style.transition="all 0.5s ease-in-out",n[o].style.transform=" translate("+l+"em, 0em)",n[o].style.backgroundImage="url(../../img/playingcards/".concat(c.rank,"_of_").concat(c.suit,".svg)")}}},{key:"spreadCards",value:function(){var e=this;this.spreadCardsDone=!0;var t,a=[];for(t=0;t<52;t++)a.push(r.a.createElement("div",{key:t,className:"playingcard",style:{zIndex:52-t}}));this.setState({cards:a}),this.timeout=setTimeout((function(){var t,a,n,r=document.getElementsByClassName("playingcard"),i=0;for(a=1;a<=r.length;a++){if(n=r[a-1],a%4==0)n.classList.add("left-cards"),t="translate(-43.75em, 0em) rotate(-180deg)";else if(a%4==1)n.classList.add("top-cards"),t="translate(0em, -15.92em) rotate(-180deg)";else if(a%4==2)n.classList.add("right-cards"),t="translate(43.75em, 0em) rotate(180deg)";else{n.classList.add("bottom-cards"),t="translate("+(6.77*i-40.62)+"em, 15.92em)",n.setAttribute("data-card-index",i),n.addEventListener("mouseover",(function(e){e.stopImmediatePropagation();var t=e.target;if(!t.classList.contains("shown-cards")&&"true"!==t.getAttribute("data-card-selected")){t.style.transition="all 0.2s ease-in-out";var a=t.style.transform.split(") ")[0];a!==t.style.transform&&(a+=")"),t.style.transform=a+" translate(0em, -0.78125em)"}})),n.addEventListener("mouseout",(function(e){e.stopImmediatePropagation();var t=e.target;if("true"!==t.getAttribute("data-card-selected")){t.style.transition="all 0.2s ease-in-out";var a=t.style.transform.split(") ")[0];a!==t.style.transform&&(a+=")"),t.style.transform=a}})),n.addEventListener("click",(function(t){t.stopImmediatePropagation();var a=t.target;a.classList.contains("shown-cards")||("true"===a.getAttribute("data-card-selected")?e.unselectCardElement(a):e.selectCardElement(a))}));var s=e.deck[i];n.style.backgroundImage="url(../../img/playingcards/".concat(s.rank,"_of_").concat(s.suit,".svg)"),i++}n.style.transition="all 0.5s "+Math.round(.025*a*100)/100+"s",n.style.transform=t}e.timeout=setTimeout((function(){e.setState({displayNumberOfCards:!0,displayCombinationButtons:!0,displayWaitingPlayers:!0}),e.sendGameReady()}),2e3)}),1e3)}},{key:"updateAvailableCombinations",value:function(){this.setState({availableCombinations:this.fc.findAll(this.deck)})}},{key:"selectCardElement",value:function(e){e.style.transition="all 0.2s ease-in-out";var t=e.style.transform.split(") ")[0];t!==e.style.transform&&(t+=")"),e.style.transform=t+" translate(0em, -1.5625em)",e.setAttribute("data-card-selected","true")}},{key:"unselectCardElement",value:function(e){e.style.transition="all 0.2s ease-in-out";var t=e.style.transform.split(") ")[0];t!==e.style.transform&&(t+=")"),e.style.transform=t,e.setAttribute("data-card-selected","false")}},{key:"selectCombination",value:function(e){this.unselectAllCards(),this.lastSelectCombinationName===e?this.lastSelectCombinationCount++:(this.lastSelectCombinationName=e,this.lastSelectCombinationCount=0);var t=this.state.availableCombinations[e];if(this.lastSelectCombinationCount===t.length)return this.lastSelectCombinationName=!1,this.lastSelectCombinationCount=0,void this.unselectAllCards();var a,n=t[this.lastSelectCombinationCount],r=!0,i=!1,s=void 0;try{for(var o,l=n[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var c=o.value;(a=this.findCardElement(c.index))?this.selectCardElement(a):console.warn("Cannot find card index "+c.index)}}catch(e){i=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw s}}}},{key:"unselectAllCards",value:function(){var e=document.getElementsByClassName("bottom-cards"),t=!0,a=!1,n=void 0;try{for(var r,i=e[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var s=r.value;this.unselectCardElement(s)}}catch(e){a=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}}},{key:"findCardElement",value:function(e){var t=document.getElementsByClassName("bottom-cards"),a=!0,n=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var o=i.value;if(parseInt(o.getAttribute("data-card-index"))===e)return o}}catch(e){n=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(n)throw r}}return!1}},{key:"onPassBtnClicked",value:function(){this.lastPlayer&&this.lastCombination&&(this.setState({displayTurnButtons:!1}),this.sendPass())}},{key:"onSubmitBtnClicked",value:function(){this.setState({displayTurnButtons:!1});var e=this.getSelectedCards(),t=this.fc.cardsToDeck(e);if(!this.lastPlayer||!this.lastCombination){var a=!1,n=!0,r=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value;if("diamonds"===l.suit&&"3"===l.rank){a=!0;break}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}if(!a)return alert("First turn cards must include a Diamond-3 card."),void this.setState({displayTurnButtons:!0})}var c=T()(t);if(!c)return alert("Invalid combination."),void this.setState({displayTurnButtons:!0});if(this.lastCombination&&this.lastPlayer.id!==this.props.client.player.id){if(this.lastCombination.combinationName!==c.combinationName)return alert("Combination type is not the same the last combination type."),void this.setState({displayTurnButtons:!0});if(c.compare(this.lastCombination)<=0)return alert("Your combination has to be larger than the last combination."),void this.setState({displayTurnButtons:!0})}this.sendTurn(e)}},{key:"getSelectedCards",value:function(){var e,t=document.getElementsByClassName("bottom-cards"),a=[],n=!0,r=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value;"true"===l.getAttribute("data-card-selected")&&(e=parseInt(l.getAttribute("data-card-index")),a.push({index:e,card:this.deck[e]}))}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return a}},{key:"renderPlayground",value:function(){var e=this,t={};if(this.state.availableCombinations){var a=!0,n=!1,i=void 0;try{for(var s,o=x.a.FIVE_CARD_HANDS[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var l=s.value;t[l]=this.state.availableCombinations[l]&&this.state.availableCombinations[l].length>0}}catch(e){n=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(n)throw i}}}return r.a.createElement("div",{className:"board",id:"playingcards-board"},r.a.createElement("div",{className:"playingcards",id:"cards-container"},r.a.createElement(O,{show:this.state.displayWinner,winner:this.state.winner&&this.state.winner.name,onHide:function(){e.setState({displayWinner:!1})}}),this.state.displayWaitingPlayers&&r.a.createElement("div",{className:"waiting-players align-items-center justify-items-center"},"Waiting other players..."),this.state.displayLeftPlayerPassed&&r.a.createElement("div",{className:"left-player-passed align-items-center justify-items-center"},"Passed"),this.state.displayTopPlayerPassed&&r.a.createElement("div",{className:"top-player-passed align-items-center justify-items-center"},"Passed"),this.state.displayRightPlayerPassed&&r.a.createElement("div",{className:"right-player-passed align-items-center justify-items-center"},"Passed"),this.state.displayBottomPlayerPassed&&r.a.createElement("div",{className:"bottom-player-passed align-items-center justify-items-center"},"Passed"),this.state.displayNumberOfCards&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"player1"},r.a.createElement("p",null,this.state.playerInfo1)),r.a.createElement("div",{className:"player2"},r.a.createElement("p",null,this.state.playerInfo2)),r.a.createElement("div",{className:"player3"},r.a.createElement("p",null,this.state.playerInfo3))),this.state.displayTurnButtons&&r.a.createElement("div",{className:"turn-buttons"},r.a.createElement(B.a,null,r.a.createElement(m.a,{variant:"primary",id:"pass-btn",onClick:this.onPassBtnClicked},r.a.createElement("i",{className:"fas fa-forward",disabled:this.state.passBtnDisabled})," Pass"),r.a.createElement(m.a,{variant:"warning",id:"hint-btn",disabled:!0},r.a.createElement("i",{className:"far fa-lightbulb"})," Hint"),r.a.createElement(m.a,{variant:"success",id:"submit-btn",onClick:this.onSubmitBtnClicked},r.a.createElement("i",{className:"fas fa-check"})," Submit"))),this.state.displayCombinationButtons&&r.a.createElement("div",{className:"combination-buttons"},r.a.createElement(B.a,null,r.a.createElement(m.a,{variant:t.straight?"success":"secondary",id:"straight-btn",disabled:!t.straight,onClick:function(){e.selectCombination("straight")}},"Straight"),r.a.createElement(m.a,{variant:t.flush?"success":"secondary",id:"flush-btn",disabled:!t.flush,onClick:function(){e.selectCombination("flush")}},"Flush"),r.a.createElement(m.a,{variant:t.fullHouse?"success":"secondary",id:"full-house-btn",disabled:!t.fullHouse,onClick:function(){e.selectCombination("fullHouse")}},"Full House"),r.a.createElement(m.a,{variant:t.fourOfAKind?"success":"secondary",id:"four-of-a-kind-btn",disabled:!t.fourOfAKind,onClick:function(){e.selectCombination("fourOfAKind")}},"Four Of A Kind"),r.a.createElement(m.a,{variant:t.straightFlush?"success":"secondary",id:"straight-flush-btn",disabled:!t.straightFlush,onClick:function(){e.selectCombination("straightFlush")}},"Straight Flush"))),this.state.cards))}}])&&D(a.prototype,n),i&&D(a,i),t}(C),z=a(115),G=function(e){var t,a,n,i,s=[],o=[[1,2,3],[4,5,6],[7,8,9]];for(a=0;a<o.length;a++){for(t=[],n=0;n<o[a].length;n++)i=!(!e.enabled||0===e.enabled.length)&&e.enabled.includes(o[a][n]),t.push(r.a.createElement(m.a,{variant:i?"outline-secondary":"secondary",className:"py-3 touch-keypad-key touch-keypad-value",key:a+"-"+n,onClick:e.onNumberClick,disabled:!i},o[a][n]));s.push(r.a.createElement(B.a,{key:a},t))}return r.a.createElement(z.a,{fluid:!0,className:"touch-keypad row",style:{display:e.show?"":"none"}},r.a.createElement(B.a,{vertical:!0},s,r.a.createElement(B.a,null,r.a.createElement(m.a,{variant:"primary",className:"py-3 touch-keypad-key touch-keypad-function touch-keypad-function-done",disabled:!e.doneEnabled,onClick:e.onDoneClick},r.a.createElement("i",{className:"fas fa-check"})),r.a.createElement(m.a,{variant:e.enabled&&e.enabled.includes(0)?"outline-secondary":"secondary",className:"py-3 touch-keypad-key touch-keypad-value",onClick:e.onNumberClick,disabled:!(e.enabled&&e.enabled.includes(0))},"0"),r.a.createElement(m.a,{variant:"warning",className:"py-3 touch-keypad-key touch-keypad-function touch-keypad-function-backspace",disabled:!e.backspaceEnabled,onClick:e.onBackspaceClick},r.a.createElement("i",{className:"fas fa-backspace"})))))};a(98);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function H(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var V={bigtwo:{instance:j,icon:"fas fa-heart",name:"Big Two",minPlayers:4,maxPlayers:4},guessnum:{instance:function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(a=!(r=q(t).call(this,e,"guessnum"))||"object"!==K(r)&&"function"!=typeof r?U(n):r).maximum=100,a.randCount=0,a.guess=a.guess.bind(U(a)),a}var a,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,e),a=t,(n=[{key:"enable",value:function(){var e;this.setState((F(e={loading:!1,homeScreen:!1,gameScreen:!1,keypadDisplay:!1,funcKeyEnable:!1,keypad:!0,text:0,numberMin:1,numberMax:this.maximum,enabledKeys:[]},"numberMin",-1),F(e,"numberMax",-1),e)),this.bootDone()}},{key:"disable",value:function(){clearInterval(this.interval),document.getElementsByTagName("body")[0].classList.remove("guessnum-correct"),clearTimeout(this.timeout)}},{key:"onResponse",value:function(e){if(console.log("RESPONSE"),console.log(e),"numberMinMax"===e.event)this.setState({numberMin:e.min,numberMax:e.max});else if("newGuess"===e.event){"?"===this.state.text&&this.setState({text:0});var t={numberMin:e.min,numberMax:e.max,lastGuess:e.number,success:e.success};this.state.countDone?(this.setState(t),this.countUpDownTo(e.number)):this.awaitNumbers.push(t)}}},{key:"startGame",value:function(){clearTimeout(this.timeout),this.setState({homeScreen:!1,gameScreen:!0,countDone:!1}),this.awaitNumbers=[],this.disableInput(),this.fakeRandom()}},{key:"fakeRandom",value:function(){var e=Math.floor(Math.random()*this.maximum);this.setState({text:e}),this.randCount++,this.randCount<50||-1===this.state.numberMin||-1===this.state.numberMax?this.timeout=setTimeout(function(){this.fakeRandom()}.bind(this),25):(this.randCount=0,this.setState({text:"?",countDone:!0}),this.isMyTurn()&&this.enableInput())}},{key:"countUpDownTo",value:function(e){var t=this;this.setState({countDone:!1});var a=this.state.text;if(e>a)this.setState({text:a+1}),this.timeout=setTimeout(function(){this.countUpDownTo(e)}.bind(this),750/(e-a));else if(e<a)this.setState({text:a-1}),this.timeout=setTimeout(function(){this.countUpDownTo(e)}.bind(this),750/(a-e));else{if(this.state.success)return this.setState({gameScreen:!1,resultScreen:!0}),this.interval=setInterval((function(){var e=document.getElementsByTagName("body")[0].classList;e.contains("guessnum-correct")?e.remove("guessnum-correct"):e.add("guessnum-correct")}),1e3),void(this.timeout=setTimeout((function(){t.endGame()}),1e4));if(this.awaitNumbers.length>0){var n=this.awaitNumbers.shift();this.setState(n),this.countUpDownTo(n.lastGuess)}else this.setState({countDone:!0}),this.isMyTurn()&&this.enableInput()}}},{key:"enableInput",value:function(){this.state.keypad||(document.getElementById("guess-number-field").disabled=!1,document.getElementById("guess-number-field").focus()),document.getElementById("guess-btn").disabled=!1,this.setState({keypadDisplay:this.state.keypad,funcKeyEnable:!0,enabledKeys:[1,2,3,4,5,6,7,8,9,0]})}},{key:"disableInput",value:function(){document.getElementById("guess-number-field").disabled=!0,document.getElementById("guess-btn").disabled=!0,this.setState({keypadDisplay:!1,funcKeyEnable:!1,enabledKeys:[]})}},{key:"myTurn",value:function(){this.state.countDone&&this.enableInput()}},{key:"guess",value:function(){this.disableInput();var e=document.getElementById("guess-number-field").value;if(""===e)return this.enableInput(),this.setState({error:"It cannot be blank."}),void(document.getElementById("guess-btn").disabled=!1);var t=parseInt(e);return isNaN(t)?(this.enableInput(),void this.setState({error:"It must be an integer."})):t>=this.state.numberMax?(this.enableInput(),void this.setState({error:"It cannot be larger than the maximum value."})):t<=this.state.numberMin?(this.enableInput(),void this.setState({error:"It cannot be less than the minimum value."})):(this.setState({error:""}),this.request({event:"guess",number:t}),void(document.getElementById("guess-number-field").value=""))}},{key:"renderPlayground",value:function(){var e=this;return r.a.createElement("div",null,this.state.gameScreen&&r.a.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center guessnum-home-screen"},r.a.createElement("p",{className:"display-2"},this.state.text),r.a.createElement("p",{className:"display-4"},this.state.numberMin," - ",this.state.numberMax),r.a.createElement("br",null),r.a.createElement(u.a,{className:"ml-8 mr-8"},r.a.createElement(d.a,{id:"guess-number-field",type:"number",placeholder:"Your Guess","aria-label":"Your Guess",onKeyPress:function(t){"Enter"===t.key&&e.guess()},disabled:!0}),r.a.createElement(u.a.Append,null,r.a.createElement(m.a,{variant:"success",id:"guess-btn",onClick:this.guess},"Guess"))),r.a.createElement("br",null),r.a.createElement("p",{className:"text-danger"},this.state.error)),this.state.resultScreen&&r.a.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center guessnum-home-screen"},r.a.createElement("p",{className:"display-2"},this.state.text),r.a.createElement("p",{className:"display-4 text-success"},"Bingo!"),this.props.party.players.length>1&&r.a.createElement("p",null,"Winner: ",r.a.createElement("b",null,this.getTurnPlayer().name)),r.a.createElement("br",null),r.a.createElement("p",null,"You will be redirected back to the party dialog very soon.")),r.a.createElement(G,{show:this.state.keypadDisplay,enabled:this.state.enabledKeys,doneEnabled:this.state.funcKeyEnable,backspaceEnabled:this.state.funcKeyEnable,onNumberClick:function(e){e.preventDefault(),console.log("Click num");var t=e.target.innerHTML;document.getElementById("guess-number-field").value=document.getElementById("guess-number-field").value+t},onDoneClick:function(t){t.preventDefault(),console.log("Click done"),e.guess()},onBackspaceClick:function(e){e.preventDefault(),console.log("Click bs"),document.getElementById("guess-number-field").value=document.getElementById("guess-number-field").value.slice(0,-1)}}))}}])&&H(a.prototype,n),i&&H(a,i),t}(C),icon:"fas fa-list-ol",name:"Guess Number",minPlayers:1,maxPlayers:10}};function Y(e,t,a){return r.a.createElement(m.a,{key:e,variant:"secondary",disabled:t,onClick:function(){a(e)}},r.a.createElement("i",{className:V[e].icon+" fa-2x"}),r.a.createElement("br",null),V[e].name)}var J=function(e){return r.a.createElement(c.a,{show:e.show,animation:!1,backdrop:"static"},r.a.createElement(c.a.Header,null,r.a.createElement(c.a.Title,null,"Play³ (","1.2.10",")")),r.a.createElement(c.a.Body,null,r.a.createElement("label",null,"Nickname:"),r.a.createElement(u.a,{className:"mb-3"},r.a.createElement(d.a,{id:"nickname-field",placeholder:"Nickname","aria-label":"Nickname","aria-describedby":"party-code-field-addon"})),r.a.createElement("hr",null),r.a.createElement("label",null,"Join a party:"),r.a.createElement(u.a,{className:"mb-3"},r.a.createElement(d.a,{id:"party-code-field",placeholder:"Party Code","aria-label":"Party Code","aria-describedby":"party-code-field-addon"}),r.a.createElement(u.a.Append,null,r.a.createElement(m.a,{variant:"success",onClick:e.joinGame},"Join"))),r.a.createElement("div",{className:"d-flex"},r.a.createElement(m.a,{variant:"success",className:"btn-block"},"Quick join"),r.a.createElement(m.a,{variant:"secondary",className:"ml-2"},r.a.createElement("i",{className:"fas fa-cog"}))),r.a.createElement("hr",null),r.a.createElement("p",null,"Start a new game:"),r.a.createElement("div",{className:"hori-scroll"},function(e){var t=[];for(var a in V)t.push(Y(a,!1,e));return t}(e.startGame)),r.a.createElement(y.a.Check,{type:"switch",id:"local-mode-switch",label:"Start game locally",checked:!1,disabled:!0})),r.a.createElement(c.a.Footer,null,r.a.createElement("p",null,"Application licensed under the GPLv3 Public License.")))},Q=a(116);function X(e,t){var a=0,n=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value;l.online&&!t[l.id]&&a++}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return a}var Z=function(e){var t,a,n=e.party.admin,i=e.party.players,s=[];for(t=0;t<i.length;t++)a=i[t].id,s.push(r.a.createElement("tr",{key:a},r.a.createElement("td",null,t+1),r.a.createElement("td",null,r.a.createElement("span",{className:i[t].online?"":"text-secondary"},a===n.id?"👑 ":"",i[t].name," ",i[t].aiMode?"(AI)":""," ",e.gameInitReadyList[a]||!i[t].online?e.playerReadyList[a]?"✔️":"":r.a.createElement(g.a,{animation:"border",role:"status",size:"sm"}))),r.a.createElement("td",null,a!==n.id&&e.client.player.id===n.id&&r.a.createElement(m.a,{"data-player-id":a,variant:"danger",onClick:function(t){e.client.kickPlayer(t.target.getAttribute("data-player-id"))}},"Kick"))));var o,l,y,h,p,f=(o=e.party.gameId,V[o].minPlayers),v=function(e){return V[e].maxPlayers}(e.party.gameId);if(X(i,e.gameInitReadyList)>0)l="secondary",y=!0,h="Awaiting all players to boot game";else if(e.playerReadyList[e.player.id])if(e.player.id===n.id){var b=X(i,e.playerReadyList);b>0?(l="secondary",y=!0,h=i.length-b+"/"+i.length+" players ready"):i.length<f?(l="secondary",y=!0,h="Not enough players"):(l="success",y=!1,h="Start Game",p=function(){e.client.startGame()})}else l="warning",y=!1,h="Unready",p=function(){e.client.playerUnready()};else l="success",y=!1,h="Ready",p=function(){e.client.playerReady()};return r.a.createElement(c.a,{show:e.show,animation:!1,backdrop:"static"},r.a.createElement(c.a.Header,null,r.a.createElement(c.a.Title,null,"Party")),r.a.createElement(c.a.Body,null,r.a.createElement("div",{className:"d-flex"},Y(e.party.gameId,!e.playgroundBootDone||e.player.id!==n.id,(function(){})),r.a.createElement("div",{className:"container"},r.a.createElement("span",null,"Party Code:"),r.a.createElement("h2",null,e.party.partyId),r.a.createElement(u.a,{className:"mb-2"},r.a.createElement(d.a,{id:"share-link",value:"https://playplayplay.ml/?"+e.party.partyId,readOnly:!0}),r.a.createElement(u.a.Append,null,r.a.createElement(m.a,{variant:"primary",onClick:function(){var e=document.getElementById("share-link").value;navigator.share?navigator.share({url:e}):prompt("Your browser does not support sharing. Please copy the URL below and share it to your friends.",e)}},r.a.createElement("i",{className:"fas fa-share-square"})," Share"))),r.a.createElement("p",{className:"mb-2"},e.playgroundBootDone?"The game requires at least "+f+" player(s) and at maximum "+v+" player(s)."+(e.player.id===n.id?" Click on the icon to change game.":""):"Loading..."," "),r.a.createElement(m.a,{variant:l,onClick:p,block:!0,disabled:y},h))),r.a.createElement("hr",null),r.a.createElement(Q.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Nickname"),r.a.createElement("th",null))),r.a.createElement("tbody",null,s)),e.player.id===n.id&&r.a.createElement(m.a,{variant:"success",onClick:function(){var t=prompt("AI Player Name:");e.client.addAi(t)},block:!0},r.a.createElement("i",{className:"fas fa-plus"})," Add computer (AI)")),r.a.createElement(c.a.Footer,null,r.a.createElement("p",null,"Application licensed under the GPLv3 Public License.")))};a(100),a(102),a(105),a(106),a(107),a(108);function $(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ee=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endPoint=t,this.player=!1,this.party=!1,this.token=!1,this.ready=!1,this.versionMatch=!1,this.serverVersion=!1,this.gameInitReadyList={},this.playerReadyList={},this.listeners={},this.pendingRequests=[],this.initializeSocket()}var t,a,n;return t=e,(a=[{key:"initializeSocket",value:function(){var e=this;this.socket=l()(this.endPoint),this.socket.on("server",(function(t){if("info"===t.event){if(e.serverVersion=t.version,"1.2.10"!==t.version)e.askRefreshPage();else for(e.versionMatch=!0;e.pendingRequests.length>0;){var a=e.pendingRequests.shift();e.socketEmit(a.event,a.data)}e.ready=!0}})),this.socket.on("party",(function(t){console.log(t),"partyJoined"===t.event?(e.player=t.player,e.token=t.token,e.party=t.party):"gameInitReady"===t.event?e.gameInitReadyList=t.gameInitReady:"playerReady"===t.event?e.playerReadyList=t.playerReady:e.party&&"playerListChanged"===t.event?e.party.players=t.players:e.party&&"gameChanged"===t.event?e.party.gameId=t.gameId:e.party&&"playerChanged"===t.event?console.warn("Handle player changed"):e.party&&"adminChanged"===t.event&&(e.party.admin=t.admin),e.dispatch("party",t)})),this.socket.on("game",(function(t){e.dispatch("game",t)})),this.socket.on("chat",(function(t){e.dispatch("chat",t)})),this.forceSocketEmit("server",{event:"info"})}},{key:"on",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"off",value:function(e,t){if(!this.listeners[e])return!1;var a=this.listeners[e],n=a.indexOf(t);return-1!==n&&(a.splice(n,1),!0)}},{key:"dispatch",value:function(e,t){if(this.listeners[e]){var a=this.listeners[e],n=!0,r=!1,i=void 0;try{for(var s,o=a[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)(0,s.value)(t,this)}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}}},{key:"askRefreshPage",value:function(){confirm("Your client version (1.2.10) does not match with the server's version ("+this.serverVersion+"). This is probably due to a pending update for the app. Do you want to refresh the page and try again?")&&(window.location=window.location.origin+"/?"+Date.now())}},{key:"forceSocketEmit",value:function(e,t){this.socket.emit(e,t)}},{key:"socketEmit",value:function(e,t){if(this.ready){if(!this.versionMatch)return void this.askRefreshPage();this.forceSocketEmit(e,t)}else this.pendingRequests.push({event:e,data:t})}},{key:"addAi",value:function(e){this.socketEmit("party",{event:"addAi",token:this.token,playerId:this.player.id,partyId:this.party.partyId,playerName:e})}},{key:"gameRequest",value:function(e){this.socketEmit("game",{token:this.token,partyId:this.party.partyId,playerId:this.player.id,request:e})}},{key:"createParty",value:function(e,t){this.socketEmit("party",{event:"create",gameId:t,playerName:e})}},{key:"joinParty",value:function(e,t){this.socketEmit("party",{event:"join",partyId:t,playerName:e})}},{key:"kickPlayer",value:function(e){this.socketEmit("party",{event:"kickPlayer",token:this.token,partyId:this.party.partyId,playerId:this.player.id,kickPlayerId:e})}},{key:"gameInitReady",value:function(){this.socketEmit("party",{event:"gameInitReady",token:this.token,partyId:this.party.partyId,playerId:this.player.id})}},{key:"playerReady",value:function(){this.socketEmit("party",{event:"playerReady",token:this.token,partyId:this.party.partyId,playerId:this.player.id})}},{key:"playerUnready",value:function(){this.socketEmit("party",{event:"playerUnready",token:this.token,partyId:this.party.partyId,playerId:this.player.id})}},{key:"startGame",value:function(){this.socketEmit("party",{event:"startGame",token:this.token,partyId:this.party.partyId,playerId:this.player.id})}}])&&$(t.prototype,a),n&&$(t,n),e}();function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var se=function(e){function t(e){var a,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=!(r=ne(t).call(this,e))||"object"!==te(r)&&"function"!=typeof r?re(n):r;var i="https://0.playplayplay.ml",s=localStorage.getItem("endpoint");return localStorage&&s&&(i=s),a.client=new ee(i),a.state={gameModalShow:!0,partyModalShow:!1,playground:!1,gameInitReadyList:!1,playerReadyList:!1},a.startGame=a.startGame.bind(re(a)),a.joinGame=a.joinGame.bind(re(a)),a.listen(),a}var a,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,e),a=t,(n=[{key:"componentDidMount",value:function(){if(window.location.search&&7===window.location.search.length){var e=prompt("Enter your nickname:");this.client.joinParty(e,window.location.search.substring(1,7)),this.setState({gameModalShow:!1})}}},{key:"listen",value:function(){var e=this;this.client.on("party",(function(t){if(e.setState({party:e.client.party}),"gameInitReady"===t.event)e.setState({gameInitReadyList:e.client.gameInitReadyList});else if("playerReady"===t.event)e.setState({playerReadyList:e.client.playerReadyList});else if("startGame"===t.event)e.setState({gameModalShow:!1,partyModalShow:!1});else if(e.client.party&&e.client.party.gameId&&("partyJoined"===t.event||"gameChanged"===t.event))e.state.playground?e.setState({awaitChangeGame:!0}):(e.setState({gameModalShow:!1,partyModalShow:!0}),e.updatePlayground());else if(t.event&&t.event.endsWith("Failed")){if(console.error(t),-4===t.code)return;alert("Code: "+t.code+"\nError: "+t.msg)}}))}},{key:"updatePlayground",value:function(){var e,t=this;this.setState({playgroundBootDone:!1,playground:r.a.createElement((e=this.client.party.gameId,V[e].instance),{party:this.state.party,client:this.client,onBootDone:function(){console.log("Bootdone"),t.setState({playgroundBootDone:!0}),t.client.gameInitReady()},onDisable:function(){t.setState({gameModalShow:!1,partyModalShow:!0,playground:!1,playgroundBootDone:!1}),t.state.awaitChangeGame&&(t.setState({awaitChangeGame:!1}),t.updatePlayground())}})})}},{key:"joinGame",value:function(){var e=document.getElementById("nickname-field").value,t=document.getElementById("party-code-field").value;e&&""!==e?t&&""!==t&&6===t.length?(this.client.joinParty(e,t),this.setState({gameModalShow:!1})):alert("Party Code Invalid."):alert("Please fill in your nickname.")}},{key:"startGame",value:function(e){if(function(e){return void 0!==V[e]}(e)){document.getElementById("local-mode-switch").checked;var t=document.getElementById("nickname-field").value;t&&""!==t?(this.client.createParty(t,e),this.setState({gameModalShow:!1})):alert("Please fill in your nickname.")}else alert("The selected game is currently unavailable.")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.playground,r.a.createElement(J,{show:this.state.gameModalShow,onHide:function(){return e.setState({gameModalShow:!1})},startGame:this.startGame,joinGame:this.joinGame}),this.state.partyModalShow&&r.a.createElement(Z,{show:this.state.partyModalShow,onHide:function(){return e.setState({partyModalShow:!1})},client:this.client,playerReadyList:this.state.playerReadyList,gameInitReadyList:this.state.gameInitReadyList,party:this.state.party,player:this.client.player,playgroundBootDone:this.state.playgroundBootDone}))}}])&&ae(a.prototype,n),i&&ae(a,i),t}(r.a.Component);s.a.render(r.a.createElement(se,null),document.getElementById("root"))},17:function(e,t){e.exports={SUIT:["diamonds","clubs","hearts","spades"],RANK:["3","4","5","6","7","8","9","10","jack","queen","king","ace","2"],COMBINATIONS:["pair","threeOfAKind","fiveCardHands"],FIVE_CARD_HANDS:["straight","flush","fullHouse","fourOfAKind","straightFlush"]}},27:function(e,t,a){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=a(52),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"findAll",value:function(e){var t={pair:[],threeOfAKind:[],straight:[],flush:[],fullHouse:[],fourOfAKind:[],straightFlush:[]};if(e.length<2)return t;var a=this.deckToCards(e);return t.pair=this.findPair(a),t.threeOfAKind=this.findThreeOfAKind(a),t.straight=this.findStraight(a),t.flush=this.findFlush(a),t.fullHouse=this.findFullHouse(a),t.fourOfAKind=this.findFourOfAKind(a),t.straightFlush=this.findStraightFlush(a),t}},{key:"findPair",value:function(e){return this.byRankSame(e,2)}},{key:"findThreeOfAKind",value:function(e){return this.byRankSame(e,3)}},{key:"findStraight",value:function(e){return this.byRankConsecutive(e,5)}},{key:"findFlush",value:function(e){return this.bySuitSame(e,5)}},{key:"findFullHouse",value:function(e){var t=this;return this.byRankSameWithExternal(e,3,(function(e,a,n){var r,i,s=t.findPair(a);for(i=0;i<s.length;i++)r=(r=n.slice()).concat(s[i]),e.push(r)}))}},{key:"findFourOfAKind",value:function(e){return this.byRankSameWithExternal(e,4,(function(e,t,a){var n,r;for(r=0;r<t.length;r++)(n=a.slice()).push(t[r]),e.push(n)}))}},{key:"byRankSameWithExternal",value:function(e,t,a){var n,r,i,s,o=[],l=this.byRankSame(e,t);for(r=0;r<l.length;r++){for(n=e.slice(),i=0;i<l[r].length;i++)for(s=0;s<n.length;s++)if(n[s].card.equals(l[r][i].card)){n.splice(s,1);break}a(o,n,l[r])}return o}},{key:"findStraightFlush",value:function(e){var t,a,n,r=this.findStraight(e),i=[];for(t=0;t<r.length;t++)for(n=0,a=1;a<r[t].length&&r[t][a].card.suit===r[t][a-1].card.suit;a++)4==++n&&i.push(r[t]);return i}},{key:"byRankSame",value:function(e,t){return this.sameCombinations(e,t,"getRankSize")}},{key:"bySuitSame",value:function(e,t){return this.sameCombinations(e,t,"getSuitSize")}},{key:"sameCombinations",value:function(e,t,a){var n,r,i,s,o,l=[];for(e.sort((function(e,t){var n=e.card[a](),r=t.card[a]();return n<r?-1:n>r?1:0})),n=0;n<e.length-(t-1);n++)for(s=0,r=n+1;r<e.length&&e[r-1].card[a]()===e[r].card[a]();r++)if(++s==t-1){for(o=[],i=n;i<n+t;i++)o.push(e[i]);l.push(o);break}return l}},{key:"byRankConsecutive",value:function(e,t){var a,n,r,i,s,o=[];for(e.sort((function(e,t){var a=e.card.getRankSize(),n=t.card.getRankSize();return a<n?-1:a>n?1:0})),a=0;a<e.length-(t-1);a++)for(i=0,n=a+1;n<e.length&&e[n-1].card.getRankSize()===e[n].card.getRankSize()-1;n++)if(++i==t-1){for(s=[],r=a;r<a+t;r++)s.push(e[r]);o.push(s);break}return o}},{key:"sortByRank",value:function(e){this.sortDeckSuits(e),this.sortDeckRanks(e)}},{key:"sortBySuit",value:function(e){this.sortDeckRanks(e),this.sortDeckSuits(e)}},{key:"sortDeckRanks",value:function(e){e.sort((function(e,t){var a=e.getRankSize(),n=t.getRankSize();return a<n?-1:a>n?1:0}))}},{key:"sortDeckSuits",value:function(e){e.sort((function(e,t){var a=e.getSuitSize(),n=t.getSuitSize();return a<n?-1:a>n?1:0}))}},{key:"deckToCards",value:function(e){var t,a=[];for(t=0;t<e.length;t++)a.push({index:t,card:e[t]});return a}},{key:"cardsToDeck",value:function(e){var t,a=[];for(t=0;t<e.length;t++)a.push(e[t].card);return a}},{key:"jsonToDeck",value:function(e){var t,a=[];for(t=0;t<e.length;t++)a.push(new r(e[t].suit,e[t].rank));return a}},{key:"jsonToCards",value:function(e){var t,a=[];for(t=0;t<e.length;t++)a.push({index:e[t].index,card:new r(e[t].card.suit,e[t].card.rank)});return a}}])&&n(t.prototype,a),i&&n(t,i),e}();e.exports=i},37:function(e,t,a){var n=a(27),r=a(17),i=a(93);e.exports=function(e){var t,a=new n,s=!1;if(1===e.length)t="single";else{var o,l,c=a.findAll(e);if(t=!1,5===e.length){var u=!1;for(o=r.FIVE_CARD_HANDS.length-1;o>=0;o--)if(c[l=r.FIVE_CARD_HANDS[o]].length>0){s=l,u=!0;break}u&&(t="fiveCardHands")}else 3===e.length?c.threeOfAKind.length>0&&(t="threeOfAKind"):2===e.length&&c.pair.length>0&&(t="pair");if(!t)return!1}return new i(t,e,s)}},52:function(e,t,a){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=a(17),i=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.suit=t,this.rank=a}var t,a,i;return t=e,(a=[{key:"getSuitSize",value:function(){return r.SUIT.indexOf(this.suit)}},{key:"getRankSize",value:function(){return r.RANK.indexOf(this.rank)}},{key:"compare",value:function(e){var t=r.RANK.indexOf(this.rank),a=r.RANK.indexOf(e.rank);if(t<a)return-1;if(t>a)return 1;var n=r.SUIT.indexOf(this.suit),i=r.SUIT.indexOf(e.suit);return n<i?-1:n>i?1:0}},{key:"equals",value:function(e){return this.suit===e.suit&&this.rank===e.rank}}])&&n(t.prototype,a),i&&n(t,i),e}();e.exports=i},86:function(e,t){},93:function(e,t,a){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=a(17),i=(a(27),function(){function e(t,a,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cards=a,this.combinationName=t,this.fiveCardName=n}var t,a,i;return t=e,(a=[{key:"getRankSize",value:function(){var e,t=0;for(e=0;e<this.cards.length;e++)t+=this.cards[e].getRankSize();return t}},{key:"getSuitSize",value:function(){var e,t=0;for(e=0;e<this.cards.length;e++)t+=this.cards[e].getSuitSize();return t}},{key:"compare",value:function(e){if(this.cards.length!==e.cards.length||this.combinationName!==e.combinationName)throw new Error("The two combinations' length/types are not the same. They cannot be compared.");if(5===this.cards.length&&5===e.cards.length){var t=r.FIVE_CARD_HANDS.indexOf(this.combinationName),a=r.FIVE_CARD_HANDS.indexOf(e.combinationName);if(t<a)return-1;if(t>a)return 1}var n=this.getRankSize(),i=e.getRankSize();if(n<i)return-1;if(n>i)return 1;var s=this.getSuitSize(),o=e.getSuitSize();return s<o?-1:s>o?1:0}}])&&n(t.prototype,a),i&&n(t,i),e}());e.exports=i},94:function(e,t,a){var n=a(24),r=a(95);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1},s=(n(e.i,r,i),r.locals?r.locals:{});e.exports=s},95:function(e,t,a){var n=a(25),r=a(96),i=a(97);t=n(!1);var s=r(i);t.push([e.i,".board {\r\n    position: fixed;\r\n    left: calc(50% - 50em);\r\n    top: calc(50% - 28.125em);\r\n    width: 100em;\r\n    height: 56.25em;\r\n}\r\n\r\n.board .playingcards {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n}\r\n\r\n.board .playingcards .playingcard {\r\n    position: absolute;\r\n    width: 6.25em;\r\n    height: 9.08em;\r\n    top: -4.54em;\r\n    left: -3.125em;\r\n    background-size: cover;\r\n    background-image: url("+s+");\r\n    transition: all 0.5s ease-in-out;\r\n    -webkit-transform-origin: 50% 50%;\r\n    -moz-transform-origin: 50% 50%;\r\n    -o-transform-origin: 50% 50%;\r\n    -ms-transform-origin: 50% 50%;\r\n\ttransform-origin: 50% 50%;\r\n}\r\n\r\n.combination-buttons {\r\n    position: absolute;\r\n    left: -24em;\r\n    top: 6em;\r\n    z-index: 53;\r\n}\r\n\r\n.combination-buttons button {\r\n    padding: .75rem 1.5rem;\r\n    font-size: 1.5rem;\r\n    line-height: 1;\r\n    border-radius: .45rem;\r\n    white-space: nowrap;\r\n}\r\n\r\n.turn-buttons {\r\n    position: absolute;\r\n    left: -12em;\r\n    top: 2em;\r\n    z-index: 53;\r\n}\r\n\r\n.turn-buttons button {\r\n    padding: .75rem 1.5rem;\r\n    font-size: 1.5rem;\r\n    line-height: 1;\r\n    border-radius: .45rem;\r\n    white-space: nowrap;\r\n}\r\n\r\n.player1 {\r\n    position: absolute;\r\n    left: -31em;\r\n    top: -5.5em;\r\n    font-size: 1.5rem;\r\n    white-space: nowrap;\r\n}\r\n\r\n.player2 {\r\n    position: absolute;\r\n    left: 3em;\r\n    top: -13em;\r\n    font-size: 1.5rem;\r\n    white-space: nowrap;\r\n}\r\n\r\n.player3 {\r\n    position: absolute;\r\n    left: 27em;\r\n    top: -5.5em;\r\n    font-size: 1.5rem;\r\n    white-space: nowrap;\r\n}\r\n\r\n.waiting-players {\r\n    position: absolute;\r\n    left: -4.5em;\r\n    top: -1em;\r\n    font-size: 2.5rem;\r\n    white-space: nowrap;\r\n}\r\n\r\n.left-player-passed {\r\n    position: absolute;\r\n    left: -12em;\r\n    top: -1em;\r\n    font-size: 3rem;\r\n    white-space: nowrap;\r\n}\r\n\r\n.right-player-passed {\r\n    position: absolute;\r\n    left: 9em;\r\n    top: -1em;\r\n    font-size: 3rem;\r\n    white-space: nowrap;\r\n}\r\n\r\n.top-player-passed {\r\n    position: absolute;\r\n    left: -1.5em;\r\n    top: -3em;\r\n    font-size: 3rem;\r\n    white-space: nowrap;\r\n}\r\n\r\n.bottom-player-passed {\r\n    position: absolute;\r\n    left: -1.5em;\r\n    top: 0.5em;\r\n    font-size: 3rem;\r\n    white-space: nowrap;\r\n}",""]),e.exports=t},97:function(e,t,a){"use strict";a.r(t),t.default=a.p+"f956b6d85f78462ab4adc75933f408cb.svg"},98:function(e,t,a){var n=a(24),r=a(99);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1},s=(n(e.i,r,i),r.locals?r.locals:{});e.exports=s},99:function(e,t,a){(t=a(25)(!1)).push([e.i,".guessnum-home-screen {\r\n    height: 90vh;\r\n}\r\n\r\nbody.guessnum-correct {\r\n    background-color: rgb(166, 255, 168)\r\n}",""]),e.exports=t}},[[110,1,2]]]);
//# sourceMappingURL=app.0a64c72ef67413f59bd8.js.map