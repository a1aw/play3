(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,a){var n=a(24),r=a(109);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1},s=(n(e.i,r,i),r.locals?r.locals:{});e.exports=s},109:function(e,t,a){(t=a(25)(!1)).push([e.i,"body {\r\n    width: 100%;\r\n    height: 100vh;\r\n    position: absolute;\r\n    background-color: rgb(229, 229, 229)\r\n}\r\n\r\n.party-list {\r\n    margin: 4px;\r\n    position: absolute;\r\n    top: 4px;\r\n    right: 4px;\r\n    text-align: right;\r\n}\r\n\r\n.hori-scroll {\r\n    margin: 4px;\r\n    overflow: auto;\r\n    white-space: nowrap;\r\n}\r\n\r\n.hori-scroll button {\r\n    margin: 4px;\r\n}\r\n\r\n.playground {\r\n    padding: 8px;\r\n}\r\n\r\n.loading {\r\n    margin-top: 1rem;\r\n}\r\n\r\n@media only screen and (max-width: 768px) {\r\n    nav {\r\n        margin-top: env(safe-area-inset-top);\r\n    }\r\n\r\n    .party-list {\r\n        margin-top: env(safe-area-inset-top);\r\n    }\r\n\r\n    .modal {\r\n        padding-top: env(safe-area-inset-top);\r\n        padding-bottom: env(safe-area-inset-bottom);\r\n    }\r\n\r\n    .playground {\r\n        padding-top: env(safe-area-inset-top);\r\n        padding-bottom: env(safe-area-inset-bottom);\r\n    }\r\n}\r\n\r\n/* Touch Keypad */\r\n\r\n.touch-keypad {\r\n    position: fixed;\r\n    left: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    margin: 0px;\r\n    padding: 0px;\r\n    z-index: 2;\r\n    background: rgba(255, 255, 255, 0.4);\r\n    padding-bottom: env(safe-area-inset-bottom);\r\n}\r\n\r\n.touch-keypad .btn-group-vertical {\r\n    width: 100%;\r\n}\r\n\r\n.touch-keypad .numeric-keypad {\r\n    width: 75%;\r\n}\r\n\r\n.touch-keypad-key {\r\n    min-height: 58px;\r\n}",""]),e.exports=t},110:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(11),s=a.n(i),l=a(26),o=a.n(l),c=a(117),u=a(112),d=a(54),m=a(119),y=a(118);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,i=void 0;try{for(var s,l=e[Symbol.iterator]();!(n=(s=l.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var p=function(e){var t,a=h(r.a.useState(!1),2),n=a[0],i=a[1],s=[];for(t=e.min;t<=e.max;t++)s.push(r.a.createElement("option",{key:t},t));n||(n=e.min);var l=[];for(t=1;t<=n;t++)l.push(r.a.createElement(u.a,{className:"mb-3",key:t},r.a.createElement(u.a.Prepend,null,r.a.createElement(u.a.Text,{id:"player-number-"+t},"Player ",t)),r.a.createElement(d.a,{placeholder:"Player "+t,"aria-label":"Nickname","aria-describedby":"player-number-"+t,id:"player-nick-"+t})));return r.a.createElement(c.a,{show:e.show,animation:!1,backdrop:"static"},r.a.createElement(c.a.Header,null,r.a.createElement(c.a.Title,null,"Setup Players")),r.a.createElement(c.a.Body,null,r.a.createElement("p",null,"This game requires at least ",e.min," player(s) and at maximum ",e.max," player(s). Please enter the names for the players below:"),r.a.createElement(y.a.Group,null,r.a.createElement(y.a.Label,null,"Players:"),r.a.createElement(y.a.Control,{as:"select",id:"localPlayersSelect",onChange:function(){var e=document.getElementById("localPlayersSelect").value;i(e)}},s)),l,r.a.createElement(m.a,{variant:"success",block:!0,onClick:function(){var t,a,r=[];for(t=1;t<=n;t++)""===(a=document.getElementById("player-nick-"+t).value)&&(a="Player "+t),r.push(a);e.onComplete(r)}},"Continue")),r.a.createElement(c.a.Footer,null,r.a.createElement("p",null,"Application licensed under the GPLv3 Public License.")))},f=function(e){return r.a.createElement(c.a,{show:e.show,backdrop:"static"},r.a.createElement(c.a.Header,null,r.a.createElement(c.a.Title,null,"Pass to ",e.playerName)),r.a.createElement(c.a.Body,null,r.a.createElement("p",null,"It is ",r.a.createElement("b",null,e.playerName),"'s turn! Pass the device and let ",e.playerName,' to press the "Continue" button.'),r.a.createElement(m.a,{variant:"success",block:!0,onClick:e.onContinue},"Continue")),r.a.createElement(c.a.Footer,null,r.a.createElement("p",null,"Application licensed under the GPLv3 Public License.")))},b=function(e){return r.a.createElement(c.a,{show:e.show,backdrop:"static"},r.a.createElement(c.a.Header,null,r.a.createElement(c.a.Title,null,"Keypad or keyboard?")),r.a.createElement(c.a.Body,null,r.a.createElement("p",null,"Please select either to use keypad or keyboard for input:"),r.a.createElement("div",{className:"d-flex"},r.a.createElement(m.a,{block:!0},r.a.createElement("i",{className:"fas fa-keyboard"}),r.a.createElement("br",null),"Keyboard"),r.a.createElement(m.a,{block:!0},r.a.createElement("i",{className:"fas fa-gamepad"}),r.a.createElement("br",null),"Keypad"))),r.a.createElement(c.a.Footer,null,r.a.createElement("p",null,"Application licensed under the GPLv3 Public License.")))},v=a(113);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=function(e){function t(e,a){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=E(this,S(t).call(this,e))).gameId=a,n.state={turnPlayer:!1,loading:!0,loadingMsg:"Loading playground",keypad:!0},n.props.client.on("party",n.partyEventListener=function(e){"startGame"===e.event?n.startGame():"nextTurn"===e.event&&(n.setState({turnPlayer:e.player}),e.player.id===n.props.client.player.id&&n.myTurn())}),n.props.client.on("game",n.gameEventListener=function(e){n.response(e)}),n}var a,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,e),a=t,(n=[{key:"bootDone",value:function(){this.props.onBootDone()}},{key:"request",value:function(e){this.props.client.gameRequest(e)}},{key:"response",value:function(e){this.onResponse(e)}},{key:"onResponse",value:function(e){console.warn("No response handler handling responses from server."),console.warn(e)}},{key:"unregisterEventListener",value:function(){this.props.client.off("game",this.gameEventListener),this.props.client.off("party",this.partyEventListener)}},{key:"componentDidMount",value:function(){this.enable()}},{key:"componentWillUnmount",value:function(){this.disable(),this.unregisterEventListener()}},{key:"isSetupComplete",value:function(){return!0}},{key:"setupLocalPlayers",value:function(e,t){this.setState({loadingMsg:"Setting up local players",minPlayers:e,maxPlayers:t,setupLocalPlayers:!0})}},{key:"getTurnPlayer",value:function(){return this.state.turnPlayer}},{key:"isMyTurn",value:function(){return this.state.turnPlayer&&this.props.client.player.id===this.state.turnPlayer.id}},{key:"myTurn",value:function(){}},{key:"startGame",value:function(){}},{key:"leave",value:function(){this.disable(),this.props.onDisable(),alert("TODO: Leave"),window.location.reload()}},{key:"endGame",value:function(){this.disable(),this.props.onDisable()}},{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"renderPlayground",value:function(){}},{key:"render",value:function(){var e,t=this,a=this.props.party.players,n=[];for(e=0;e<a.length;e++)n.push(r.a.createElement("div",{key:a[e].id},r.a.createElement("span",{className:this.props.client.player.id===a[e].id?"font-weight-bold":""},this.state.turnPlayer&&this.state.turnPlayer.id===a[e].id?"➡️ ":"",a[e].name),r.a.createElement("br",null)));return r.a.createElement("div",{className:"container-fluid playground"},this.state.loading&&r.a.createElement("div",{className:"loading d-flex align-items-center justify-content-center"},r.a.createElement("center",null,r.a.createElement(v.a,{animation:"border"}),r.a.createElement("br",null),r.a.createElement("span",null,this.state.loadingMsg))),this.isSetupComplete()&&this.renderPlayground(),this.state.selectKeypadKeyboard&&r.a.createElement(b,{show:!0}),this.state.setupLocalPlayers&&r.a.createElement(p,{min:this.state.minPlayers,max:this.state.maxPlayers,show:this.state.setupLocalPlayers,onComplete:function(e){console.log(e),t.players=e,t.setState({setupLocalPlayers:!1,loadingMsg:"Loading playground"}),t.enable()}}),this.state.waitPlayer&&r.a.createElement(f,{show:this.state.waitPlayer,playerName:this.state.playerName,onContinue:function(){t.setState({waitPlayer:!1}),t.nextTurn()}.bind(this)}),n&&r.a.createElement("div",{className:"party-list"},r.a.createElement("h4",null,"Party"),n))}}])&&k(a.prototype,n),i&&k(a,i),t}(r.a.Component),P=a(27),I=a.n(P),N=(a(52),a(17)),x=a.n(N),R=a(37),O=a.n(R),B=a(114);a(94);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(a=!(r=A(t).call(this,e,"bigtwo"))||"object"!==T(r)&&"function"!=typeof r?D(n):r).fc=new I.a,a.onPassBtnClicked=a.onPassBtnClicked.bind(D(a)),a.onSubmitBtnClicked=a.onSubmitBtnClicked.bind(D(a)),a}var a,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,e),a=t,(n=[{key:"enable",value:function(){var e=this;this.setState({loading:!1}),this.bootDone(),window.addEventListener("resize",this.resizeEventListener=function(){e.resizeBoard()}),this.resizeBoard(),this.deck=!1,this.spreadCardsDone=!1}},{key:"disable",value:function(){window.removeEventListener("resize",this.resizeEventListener),clearTimeout(this.timeout)}},{key:"resizeBoard",value:function(){var e=window.innerWidth/1600;document.getElementById("playingcards-board").style.transform="scale("+e+", "+e+")"}},{key:"onResponse",value:function(e){var t=this;if(console.log("Response"),console.log(e),"newDeck"===e.event)this.deck=this.fc.jsonToCards(e.deck),console.log("New deck recevied"),this.updateAvailableCombinations(),this.spreadCardsDone||this.spreadCards();else if("updateDeck"===e.event)this.deck=this.fc.jsonToCards(e.deck),console.log("Deck update recevied"),this.updateAvailableCombinations(),this.updateDeck();else if("numberOfCards"===e.event)this.numberOfCards=e.numberOfCards,this.updateNumberOfCards();else if("gameReady"===e.event)this.setState({displayWaitingPlayers:!1}),this.isMyTurn()&&(this.removePlayerLastCards(this.props.client.player),this.setState({displayBottomPlayerPassed:!1,displayTurnButtons:!0}));else if("lastCards"===e.event){this.setState({passBtnDisabled:!1}),this.lastPlayer=e.player,this.setPassed(e.player,!1);var a=this.fc.jsonToCards(e.cards);this.lastCombination=O()(a),this.lastPlayer.id!==this.props.client.player.id&&(this.removePlayerLastCards(this.lastPlayer),this.showPlayerLastCards(this.lastPlayer,a)),this.sendGameReady()}else if("lastPassed"===e.event)this.setPassed(e.player,!0),this.removePlayerLastCards(e.player),this.sendGameReady();else if("gameOver"===e.event){var n,r=e.playerDecks;for(var i in r)n=this.getPlayerById(i),this.setPassed(n,!1),this.removePlayerLastCards(this.lastPlayer),this.showPlayerLastCards(n,r[i],!0);this.setState({winner:e.winner,displayWinner:!0}),setTimeout((function(){t.endGame()}),1e4)}else e.event&&e.event.endsWith("Failed")&&alert("Code: "+e.code+"\nError: "+e.msg)}},{key:"getPlayerById",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,i=this.props.party.players[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var s=r.value;if(s.id===e)return s}}catch(e){a=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}return!1}},{key:"setPassed",value:function(e,t){var a=this.playerCardsMap[e.id];"left-cards"===a?this.setState({displayLeftPlayerPassed:t}):"right-cards"===a?this.setState({displayRightPlayerPassed:t}):"top-cards"===a?this.setState({displayTopPlayerPassed:t}):"bottom-cards"===a&&this.setState({displayBottomPlayerPassed:t})}},{key:"updateDeck",value:function(){document.getElementById("cards-container"),this.unselectAllCards();var e,t=document.getElementsByClassName("bottom-cards");console.log(t);var a,n,r=-.5*(6.25*this.deck.length+.52*(this.deck.length-1));console.log("====== checking elements ");var i,s,l=[];for(a=0;a<t.length;a++)console.log("INDEX: "+a),n=t[a],e=parseInt(n.getAttribute("data-card-index")),console.log("Cardindex: "+e),console.log("decklen: "+this.deck.length),e>=this.deck.length?(console.log("remove"),console.log(n.style.backgroundImage),l.push(n)):(s=this.deck[e],i=r+6.77*e,n.style.transition="all 0.5s",n.style.transform="translate("+i+"em, 15.92em)",n.style.backgroundImage="url(../../img/playingcards/".concat(s.rank,"_of_").concat(s.suit,".svg)"));for(r=3.125*(l.length+1)*.5,a=0;a<l.length;a++)i=3.125*a-r,s=this.myTurnCards[a],l[a].classList.add("shown-cards"),l[a].style.transition="all 0.5s ease-in-out",l[a].style.transform=" translate("+i+"em, 5.705em)",l[a].style.backgroundImage="url(../../img/playingcards/".concat(s.rank,"_of_").concat(s.suit,".svg)")}},{key:"sendGameReady",value:function(){this.request({event:"gameReady"})}},{key:"sendPass",value:function(){this.request({event:"pass"})}},{key:"sendTurn",value:function(e){this.request({event:"turn",cards:e})}},{key:"startGame",value:function(){this.deck&&this.spreadCards(),this.setState({passBtnDisabled:!0})}},{key:"updateNumberOfCards",value:function(){var e=["left","top","right"];this.playerInfoMap={},this.playerCardsMap={};var t,a,n,r,i=this.props.party.players,s=-1;for(t=0;t<i.length;t++)if(i[t].id===this.props.client.player.id){s=t;break}for(t=1;t<4;t++)a=i[(s+t)%4],(n={})[r="playerInfo"+t]=3!==t?a.name+" ("+this.numberOfCards[a.id]+")":"("+this.numberOfCards[a.id]+") "+a.name,this.setState(n),this.playerInfoMap[a.id]=r,this.playerCardsMap[a.id]=e[t-1]+"-cards";this.playerCardsMap[this.props.client.player.id]="bottom-cards"}},{key:"removePlayerLastCards",value:function(e){var t=this.playerCardsMap[e.id];console.log("Removing for "+t+" from "+e.name);var a,n=document.getElementById("cards-container"),r=document.getElementsByClassName("shown-cards"),i=[],s=!0,l=!1,o=void 0;try{for(var c,u=r[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value;console.log(d),d.classList.contains(t)&&(console.log("removing"),i.push(d))}}catch(e){l=!0,o=e}finally{try{s||null==u.return||u.return()}finally{if(l)throw o}}for(a=0;a<i.length;a++)n.removeChild(i[a])}},{key:"showPlayerLastCards",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.removePlayerLastCards(e),document.getElementById("cards-container");var n,r=this.playerCardsMap[e.id];if("left-cards"===r)for(n=document.getElementsByClassName("left-cards"),l=0;l<t.length;l++)o=3.125*l-35.42+(a?-8.33:0),c=t[l],n[l].classList.add("shown-cards"),n[l].style.transition="all 0.5s ease-in-out",n[l].style.transform=" translate("+o+"em, 0em)",n[l].style.backgroundImage="url(../../img/playingcards/".concat(c.rank,"_of_").concat(c.suit,".svg)");else if("top-cards"===r){n=document.getElementsByClassName("top-cards");var i=(a?-10.215:0)-5.705,s=3.125*(t.length+1)*.5;for(l=0;l<t.length;l++)o=3.125*l-s,c=t[l],n[l].classList.add("shown-cards"),n[l].style.transition="all 0.5s ease-in-out",n[l].style.transform=" translate("+o+"em, "+i+"em)",n[l].style.backgroundImage="url(../../img/playingcards/".concat(c.rank,"_of_").concat(c.suit,".svg)")}else if("right-cards"===r){var l,o,c;for(n=document.getElementsByClassName("right-cards"),l=0;l<t.length;l++)o=35.42-3.125*l+(a?8.33:0),c=t[l],n[l].classList.add("shown-cards"),n[l].style.transition="all 0.5s ease-in-out",n[l].style.transform=" translate("+o+"em, 0em)",n[l].style.backgroundImage="url(../../img/playingcards/".concat(c.rank,"_of_").concat(c.suit,".svg)")}}},{key:"spreadCards",value:function(){var e=this;this.spreadCardsDone=!0;var t,a=[];for(t=0;t<52;t++)a.push(r.a.createElement("div",{key:t,className:"playingcard",style:{zIndex:52-t}}));this.setState({cards:a}),this.timeout=setTimeout((function(){var t,a,n,r=document.getElementsByClassName("playingcard"),i=0;for(a=1;a<=r.length;a++){if(n=r[a-1],a%4==0)n.classList.add("left-cards"),t="translate(-43.75em, 0em) rotate(-180deg)";else if(a%4==1)n.classList.add("top-cards"),t="translate(0em, -15.92em) rotate(-180deg)";else if(a%4==2)n.classList.add("right-cards"),t="translate(43.75em, 0em) rotate(180deg)";else{n.classList.add("bottom-cards"),t="translate("+(6.77*i-40.62)+"em, 15.92em)",n.setAttribute("data-card-index",i),n.addEventListener("mouseover",(function(e){e.stopImmediatePropagation();var t=e.target;if(!t.classList.contains("shown-cards")&&"true"!==t.getAttribute("data-card-selected")){t.style.transition="all 0.2s ease-in-out";var a=t.style.transform.split(") ")[0];a!==t.style.transform&&(a+=")"),t.style.transform=a+" translate(0em, -0.78125em)"}})),n.addEventListener("mouseout",(function(e){e.stopImmediatePropagation();var t=e.target;if("true"!==t.getAttribute("data-card-selected")){t.style.transition="all 0.2s ease-in-out";var a=t.style.transform.split(") ")[0];a!==t.style.transform&&(a+=")"),t.style.transform=a}})),n.addEventListener("click",(function(t){t.stopImmediatePropagation();var a=t.target;a.classList.contains("shown-cards")||("true"===a.getAttribute("data-card-selected")?e.unselectCardElement(a):e.selectCardElement(a))}));var s=e.deck[i];n.style.backgroundImage="url(../../img/playingcards/".concat(s.rank,"_of_").concat(s.suit,".svg)"),i++}n.style.transition="all 0.5s "+Math.round(.025*a*100)/100+"s",n.style.transform=t}e.timeout=setTimeout((function(){e.setState({displayNumberOfCards:!0,displayCombinationButtons:!0,displayWaitingPlayers:!0}),e.sendGameReady()}),2e3)}),1e3)}},{key:"updateAvailableCombinations",value:function(){this.setState({availableCombinations:this.fc.findAll(this.deck)})}},{key:"selectCardElement",value:function(e){e.style.transition="all 0.2s ease-in-out";var t=e.style.transform.split(") ")[0];t!==e.style.transform&&(t+=")"),e.style.transform=t+" translate(0em, -1.5625em)",e.setAttribute("data-card-selected","true")}},{key:"unselectCardElement",value:function(e){e.style.transition="all 0.2s ease-in-out";var t=e.style.transform.split(") ")[0];t!==e.style.transform&&(t+=")"),e.style.transform=t,e.setAttribute("data-card-selected","false")}},{key:"selectCombination",value:function(e){this.unselectAllCards(),this.lastSelectCombinationName===e?this.lastSelectCombinationCount++:(this.lastSelectCombinationName=e,this.lastSelectCombinationCount=0);var t=this.state.availableCombinations[e];if(this.lastSelectCombinationCount===t.length)return this.lastSelectCombinationName=!1,this.lastSelectCombinationCount=0,void this.unselectAllCards();var a,n=t[this.lastSelectCombinationCount],r=!0,i=!1,s=void 0;try{for(var l,o=n[Symbol.iterator]();!(r=(l=o.next()).done);r=!0){var c=l.value;(a=this.findCardElement(c.index))?this.selectCardElement(a):console.warn("Cannot find card index "+c.index)}}catch(e){i=!0,s=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw s}}}},{key:"unselectAllCards",value:function(){var e=document.getElementsByClassName("bottom-cards"),t=!0,a=!1,n=void 0;try{for(var r,i=e[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var s=r.value;this.unselectCardElement(s)}}catch(e){a=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}}},{key:"findCardElement",value:function(e){var t=document.getElementsByClassName("bottom-cards"),a=!0,n=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var l=i.value;if(parseInt(l.getAttribute("data-card-index"))===e)return l}}catch(e){n=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(n)throw r}}return!1}},{key:"onPassBtnClicked",value:function(){this.lastPlayer&&this.lastCombination&&(this.setState({displayTurnButtons:!1}),this.sendPass())}},{key:"onSubmitBtnClicked",value:function(){this.setState({displayTurnButtons:!1});var e=this.getSelectedCards();if(!this.lastPlayer||!this.lastCombination){var t=!1,a=!0,n=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var l=i.value;if("diamonds"===l.suit&&"3"===l.rank){t=!0;break}}}catch(e){n=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(n)throw r}}if(!t)return alert("First turn cards must include a Diamond-3 card."),void this.setState({displayTurnButtons:!0})}var o=O()(e);if(!o)return alert("Invalid combination."),void this.setState({displayTurnButtons:!0});if(this.lastCombination&&this.lastPlayer.id!==this.props.client.player.id){if(this.lastCombination.combinationName!==o.combinationName)return alert("Combination type is not the same the last combination type."),void this.setState({displayTurnButtons:!0});if(o.compare(this.lastCombination)<=0)return alert("Your combination has to be larger than the last combination."),void this.setState({displayTurnButtons:!0})}this.sendTurn(e),this.myTurnCards=e}},{key:"getSelectedCards",value:function(){var e,t=document.getElementsByClassName("bottom-cards"),a=[],n=!0,r=!1,i=void 0;try{for(var s,l=t[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var o=s.value;"true"===o.getAttribute("data-card-selected")&&(e=parseInt(o.getAttribute("data-card-index")),a.push(this.deck[e]))}}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return a}},{key:"renderPlayground",value:function(){var e=this,t={};if(this.state.availableCombinations){var a=!0,n=!1,i=void 0;try{for(var s,l=x.a.FIVE_CARD_HANDS[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var o=s.value;t[o]=this.state.availableCombinations[o]&&this.state.availableCombinations[o].length>0}}catch(e){n=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw i}}}return r.a.createElement("div",{className:"board",id:"playingcards-board"},r.a.createElement("div",{className:"playingcards",id:"cards-container"},this.state.displayWinner&&r.a.createElement("div",{className:"waiting-players align-items-center justify-items-center"},"Winner: ",this.state.winner.name),this.state.displayWaitingPlayers&&r.a.createElement("div",{className:"waiting-players align-items-center justify-items-center"},"Waiting other players..."),this.state.displayLeftPlayerPassed&&r.a.createElement("div",{className:"left-player-passed align-items-center justify-items-center"},"Passed"),this.state.displayTopPlayerPassed&&r.a.createElement("div",{className:"top-player-passed align-items-center justify-items-center"},"Passed"),this.state.displayRightPlayerPassed&&r.a.createElement("div",{className:"right-player-passed align-items-center justify-items-center"},"Passed"),this.state.displayBottomPlayerPassed&&r.a.createElement("div",{className:"bottom-player-passed align-items-center justify-items-center"},"Passed"),this.state.displayNumberOfCards&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"player1"},r.a.createElement("p",null,this.state.playerInfo1)),r.a.createElement("div",{className:"player2"},r.a.createElement("p",null,this.state.playerInfo2)),r.a.createElement("div",{className:"player3"},r.a.createElement("p",null,this.state.playerInfo3))),this.state.displayTurnButtons&&r.a.createElement("div",{className:"turn-buttons"},r.a.createElement(B.a,null,r.a.createElement(m.a,{variant:"primary",id:"pass-btn",onClick:this.onPassBtnClicked},r.a.createElement("i",{className:"fas fa-forward",disabled:this.state.passBtnDisabled})," Pass"),r.a.createElement(m.a,{variant:"warning",id:"hint-btn",disabled:!0},r.a.createElement("i",{className:"far fa-lightbulb"})," Hint"),r.a.createElement(m.a,{variant:"success",id:"submit-btn",onClick:this.onSubmitBtnClicked},r.a.createElement("i",{className:"fas fa-check"})," Submit"))),this.state.displayCombinationButtons&&r.a.createElement("div",{className:"combination-buttons"},r.a.createElement(B.a,null,r.a.createElement(m.a,{variant:t.straight?"success":"secondary",id:"straight-btn",disabled:!t.straight,onClick:function(){e.selectCombination("straight")}},"Straight"),r.a.createElement(m.a,{variant:t.flush?"success":"secondary",id:"flush-btn",disabled:!t.flush,onClick:function(){e.selectCombination("flush")}},"Flush"),r.a.createElement(m.a,{variant:t.fullHouse?"success":"secondary",id:"full-house-btn",disabled:!t.fullHouse,onClick:function(){e.selectCombination("fullHouse")}},"Full House"),r.a.createElement(m.a,{variant:t.fourOfAKind?"success":"secondary",id:"four-of-a-kind-btn",disabled:!t.fourOfAKind,onClick:function(){e.selectCombination("fourOfAKind")}},"Four Of A Kind"),r.a.createElement(m.a,{variant:t.straightFlush?"success":"secondary",id:"straight-flush-btn",disabled:!t.straightFlush,onClick:function(){e.selectCombination("straightFlush")}},"Straight Flush"))),this.state.cards))}}])&&L(a.prototype,n),i&&L(a,i),t}(C),M=a(115),z=function(e){var t,a,n,i,s=[],l=[[1,2,3],[4,5,6],[7,8,9]];for(a=0;a<l.length;a++){for(t=[],n=0;n<l[a].length;n++)i=!(!e.enabled||0===e.enabled.length)&&e.enabled.includes(l[a][n]),t.push(r.a.createElement(m.a,{variant:i?"outline-secondary":"secondary",className:"py-3 touch-keypad-key touch-keypad-value",key:a+"-"+n,onClick:e.onNumberClick,disabled:!i},l[a][n]));s.push(r.a.createElement(B.a,{key:a},t))}return r.a.createElement(M.a,{fluid:!0,className:"touch-keypad row",style:{display:e.show?"":"none"}},r.a.createElement(B.a,{vertical:!0},s,r.a.createElement(B.a,null,r.a.createElement(m.a,{variant:"primary",className:"py-3 touch-keypad-key touch-keypad-function touch-keypad-function-done",disabled:!e.doneEnabled,onClick:e.onDoneClick},r.a.createElement("i",{className:"fas fa-check"})),r.a.createElement(m.a,{variant:e.enabled&&e.enabled.includes(0)?"outline-secondary":"secondary",className:"py-3 touch-keypad-key touch-keypad-value",onClick:e.onNumberClick,disabled:!(e.enabled&&e.enabled.includes(0))},"0"),r.a.createElement(m.a,{variant:"warning",className:"py-3 touch-keypad-key touch-keypad-function touch-keypad-function-backspace",disabled:!e.backspaceEnabled,onClick:e.onBackspaceClick},r.a.createElement("i",{className:"fas fa-backspace"})))))};a(98);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function F(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q={bigtwo:{instance:j,icon:"fas fa-heart",name:"Big Two",minPlayers:4,maxPlayers:4},guessnum:{instance:function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(a=!(r=H(t).call(this,e,"guessnum"))||"object"!==G(r)&&"function"!=typeof r?U(n):r).maximum=100,a.randCount=0,a.guess=a.guess.bind(U(a)),a}var a,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,e),a=t,(n=[{key:"enable",value:function(){var e;this.setState((K(e={loading:!1,homeScreen:!1,gameScreen:!1,keypadDisplay:!1,funcKeyEnable:!1,keypad:!0,text:0,numberMin:1,numberMax:this.maximum,enabledKeys:[]},"numberMin",-1),K(e,"numberMax",-1),e)),this.bootDone()}},{key:"disable",value:function(){clearInterval(this.interval),document.getElementsByTagName("body")[0].classList.remove("guessnum-correct"),clearTimeout(this.timeout)}},{key:"onResponse",value:function(e){if(console.log("RESPONSE"),console.log(e),"numberMinMax"===e.event)this.setState({numberMin:e.min,numberMax:e.max});else if("newGuess"===e.event){"?"===this.state.text&&this.setState({text:0});var t={numberMin:e.min,numberMax:e.max,lastGuess:e.number,success:e.success};this.state.countDone?(this.setState(t),this.countUpDownTo(e.number)):this.awaitNumbers.push(t)}}},{key:"startGame",value:function(){clearTimeout(this.timeout),this.setState({homeScreen:!1,gameScreen:!0,countDone:!1}),this.awaitNumbers=[],this.disableInput(),this.fakeRandom()}},{key:"fakeRandom",value:function(){var e=Math.floor(Math.random()*this.maximum);this.setState({text:e}),this.randCount++,this.randCount<50||-1===this.state.numberMin||-1===this.state.numberMax?this.timeout=setTimeout(function(){this.fakeRandom()}.bind(this),25):(this.randCount=0,this.setState({text:"?",countDone:!0}),this.isMyTurn()&&this.enableInput())}},{key:"countUpDownTo",value:function(e){var t=this;this.setState({countDone:!1});var a=this.state.text;if(e>a)this.setState({text:a+1}),this.timeout=setTimeout(function(){this.countUpDownTo(e)}.bind(this),750/(e-a));else if(e<a)this.setState({text:a-1}),this.timeout=setTimeout(function(){this.countUpDownTo(e)}.bind(this),750/(a-e));else{if(this.state.success)return this.setState({gameScreen:!1,resultScreen:!0}),this.interval=setInterval((function(){var e=document.getElementsByTagName("body")[0].classList;e.contains("guessnum-correct")?e.remove("guessnum-correct"):e.add("guessnum-correct")}),1e3),void(this.timeout=setTimeout((function(){t.endGame()}),1e4));if(this.awaitNumbers.length>0){var n=this.awaitNumbers.shift();this.setState(n),this.countUpDownTo(n.lastGuess)}else this.setState({countDone:!0}),this.isMyTurn()&&this.enableInput()}}},{key:"enableInput",value:function(){this.state.keypad||(document.getElementById("guess-number-field").disabled=!1,document.getElementById("guess-number-field").focus()),document.getElementById("guess-btn").disabled=!1,this.setState({keypadDisplay:this.state.keypad,funcKeyEnable:!0,enabledKeys:[1,2,3,4,5,6,7,8,9,0]})}},{key:"disableInput",value:function(){document.getElementById("guess-number-field").disabled=!0,document.getElementById("guess-btn").disabled=!0,this.setState({keypadDisplay:!1,funcKeyEnable:!1,enabledKeys:[]})}},{key:"myTurn",value:function(){this.state.countDone&&this.enableInput()}},{key:"guess",value:function(){this.disableInput();var e=document.getElementById("guess-number-field").value;if(""===e)return this.enableInput(),this.setState({error:"It cannot be blank."}),void(document.getElementById("guess-btn").disabled=!1);var t=parseInt(e);return isNaN(t)?(this.enableInput(),void this.setState({error:"It must be an integer."})):t>=this.state.numberMax?(this.enableInput(),void this.setState({error:"It cannot be larger than the maximum value."})):t<=this.state.numberMin?(this.enableInput(),void this.setState({error:"It cannot be less than the minimum value."})):(this.setState({error:""}),this.request({event:"guess",number:t}),void(document.getElementById("guess-number-field").value=""))}},{key:"renderPlayground",value:function(){var e=this;return r.a.createElement("div",null,this.state.gameScreen&&r.a.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center guessnum-home-screen"},r.a.createElement("p",{className:"display-2"},this.state.text),r.a.createElement("p",{className:"display-4"},this.state.numberMin," - ",this.state.numberMax),r.a.createElement("br",null),r.a.createElement(u.a,{className:"ml-8 mr-8"},r.a.createElement(d.a,{id:"guess-number-field",type:"number",placeholder:"Your Guess","aria-label":"Your Guess",onKeyPress:function(t){"Enter"===t.key&&e.guess()},disabled:!0}),r.a.createElement(u.a.Append,null,r.a.createElement(m.a,{variant:"success",id:"guess-btn",onClick:this.guess},"Guess"))),r.a.createElement("br",null),r.a.createElement("p",{className:"text-danger"},this.state.error)),this.state.resultScreen&&r.a.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center guessnum-home-screen"},r.a.createElement("p",{className:"display-2"},this.state.text),r.a.createElement("p",{className:"display-4 text-success"},"Bingo!"),this.props.party.players.length>1&&r.a.createElement("p",null,"Winner: ",r.a.createElement("b",null,this.getTurnPlayer().name)),r.a.createElement("br",null),r.a.createElement("p",null,"You will be redirected back to the party dialog very soon.")),r.a.createElement(z,{show:this.state.keypadDisplay,enabled:this.state.enabledKeys,doneEnabled:this.state.funcKeyEnable,backspaceEnabled:this.state.funcKeyEnable,onNumberClick:function(e){e.preventDefault(),console.log("Click num");var t=e.target.innerHTML;document.getElementById("guess-number-field").value=document.getElementById("guess-number-field").value+t},onDoneClick:function(t){t.preventDefault(),console.log("Click done"),e.guess()},onBackspaceClick:function(e){e.preventDefault(),console.log("Click bs"),document.getElementById("guess-number-field").value=document.getElementById("guess-number-field").value.slice(0,-1)}}))}}])&&F(a.prototype,n),i&&F(a,i),t}(C),icon:"fas fa-list-ol",name:"Guess Number",minPlayers:1,maxPlayers:10}};function J(e,t,a){return r.a.createElement(m.a,{key:e,variant:"secondary",disabled:t,onClick:function(){a(e)}},r.a.createElement("i",{className:q[e].icon+" fa-2x"}),r.a.createElement("br",null),q[e].name)}var V=function(e){return r.a.createElement(c.a,{show:e.show,animation:!1,backdrop:"static"},r.a.createElement(c.a.Header,null,r.a.createElement(c.a.Title,null,"Play³ (","1.2.2",")")),r.a.createElement(c.a.Body,null,r.a.createElement("label",null,"Nickname:"),r.a.createElement(u.a,{className:"mb-3"},r.a.createElement(d.a,{id:"nickname-field",placeholder:"Nickname","aria-label":"Nickname","aria-describedby":"party-code-field-addon"})),r.a.createElement("hr",null),r.a.createElement("label",null,"Join a party:"),r.a.createElement(u.a,{className:"mb-3"},r.a.createElement(d.a,{id:"party-code-field",placeholder:"Party Code","aria-label":"Party Code","aria-describedby":"party-code-field-addon"}),r.a.createElement(u.a.Append,null,r.a.createElement(m.a,{variant:"success",onClick:e.joinGame},"Join"))),r.a.createElement("div",{className:"d-flex"},r.a.createElement(m.a,{variant:"success",className:"btn-block"},"Quick join"),r.a.createElement(m.a,{variant:"secondary",className:"ml-2"},r.a.createElement("i",{className:"fas fa-cog"}))),r.a.createElement("hr",null),r.a.createElement("p",null,"Start a new game:"),r.a.createElement("div",{className:"hori-scroll"},function(e){var t=[];for(var a in q)t.push(J(a,!1,e));return t}(e.startGame)),r.a.createElement(y.a.Check,{type:"switch",id:"local-mode-switch",label:"Start game locally",checked:!1,disabled:!0})),r.a.createElement(c.a.Footer,null,r.a.createElement("p",null,"Application licensed under the GPLv3 Public License.")))},Y=a(116);function Q(e,t){var a=0,n=!0,r=!1,i=void 0;try{for(var s,l=e[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var o=s.value;o.online&&!t[o.id]&&a++}}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return a}var X=function(e){var t,a,n=e.party.admin,i=e.party.players,s=[];for(t=0;t<i.length;t++)a=i[t].id,s.push(r.a.createElement("tr",{key:a},r.a.createElement("td",null,t+1),r.a.createElement("td",null,r.a.createElement("span",{className:i[t].online?"":"text-secondary"},a===n.id?"👑 ":"",i[t].name," ",i[t].aiMode?"(AI)":""," ",e.gameInitReadyList[a]||!i[t].online?e.playerReadyList[a]?"✔️":"":r.a.createElement(v.a,{animation:"border",role:"status",size:"sm"}))),r.a.createElement("td",null,a===n.id&&r.a.createElement(m.a,{variant:"danger",onClick:function(){e.client.kickPlayer(a)}},"Kick"))));var l,o,y,h,p,f=(l=e.party.gameId,q[l].minPlayers),b=function(e){return q[e].maxPlayers}(e.party.gameId);if(Q(i,e.gameInitReadyList)>0)o="secondary",y=!0,h="Awaiting all players to boot game";else if(e.playerReadyList[e.player.id])if(e.player.id===n.id){var g=Q(i,e.playerReadyList);g>0?(o="secondary",y=!0,h=i.length-g+"/"+i.length+" players ready"):i.length<f?(o="secondary",y=!0,h="Not enough players"):(o="success",y=!1,h="Start Game",p=function(){e.client.startGame()})}else o="warning",y=!1,h="Unready",p=function(){e.client.playerUnready()};else o="success",y=!1,h="Ready",p=function(){e.client.playerReady()};return r.a.createElement(c.a,{show:e.show,animation:!1,backdrop:"static"},r.a.createElement(c.a.Header,null,r.a.createElement(c.a.Title,null,"Party")),r.a.createElement(c.a.Body,null,r.a.createElement("div",{className:"d-flex"},J(e.party.gameId,!e.playgroundBootDone||e.player.id!==n.id,(function(){})),r.a.createElement("div",{className:"container"},r.a.createElement("span",null,"Party Code:"),r.a.createElement("h2",null,e.party.partyId),r.a.createElement(u.a,{className:"mb-2"},r.a.createElement(d.a,{id:"share-link",value:"https://playplayplay.ml/?"+e.party.partyId,readOnly:!0}),r.a.createElement(u.a.Append,null,r.a.createElement(m.a,{variant:"primary",onClick:function(){var e=document.getElementById("share-link").value;navigator.share?navigator.share({url:e}):prompt("Your browser does not support sharing. Please copy the URL below and share it to your friends.",e)}},r.a.createElement("i",{className:"fas fa-share-square"})," Share"))),r.a.createElement("p",{className:"mb-2"},e.playgroundBootDone?"The game requires at least "+f+" player(s) and at maximum "+b+" player(s)."+(e.player.id===n.id?" Click on the icon to change game.":""):"Loading..."," "),r.a.createElement(m.a,{variant:o,onClick:p,block:!0,disabled:y},h))),r.a.createElement("hr",null),r.a.createElement(Y.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Nickname"),r.a.createElement("th",null))),r.a.createElement("tbody",null,s)),e.player.id===n.id&&r.a.createElement(m.a,{variant:"success",onClick:function(){var t=prompt("AI Player Name:");e.client.addAi(t)},block:!0},r.a.createElement("i",{className:"fas fa-plus"})," Add computer (AI)")),r.a.createElement(c.a.Footer,null,r.a.createElement("p",null,"Application licensed under the GPLv3 Public License.")))};a(100),a(102),a(105),a(106),a(107),a(108);function Z(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var $=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endPoint=t,this.player=!1,this.party=!1,this.token=!1,this.gameInitReadyList={},this.playerReadyList={},this.listeners={},this.initializeSocket()}var t,a,n;return t=e,(a=[{key:"initializeSocket",value:function(){var e=this;this.socket=o()(this.endPoint),this.socket.on("party",(function(t){console.log(t),"partyJoined"===t.event?(e.player=t.player,e.token=t.token,e.party=t.party):"gameInitReady"===t.event?e.gameInitReadyList=t.gameInitReady:"playerReady"===t.event?e.playerReadyList=t.playerReady:e.party&&"playerListChanged"===t.event?e.party.players=t.players:e.party&&"gameChanged"===t.event?e.party.gameId=t.gameId:e.party&&"playerChanged"===t.event?console.warn("Handle player changed"):e.party&&"adminChanged"===t.event&&(e.party.admin=t.admin),e.dispatch("party",t)})),this.socket.on("game",(function(t){e.dispatch("game",t)})),this.socket.on("chat",(function(t){e.dispatch("chat",t)}))}},{key:"on",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"off",value:function(e,t){if(!this.listeners[e])return!1;var a=this.listeners[e],n=a.indexOf(t);return-1!==n&&(a.splice(n,1),!0)}},{key:"dispatch",value:function(e,t){if(this.listeners[e]){var a=this.listeners[e],n=!0,r=!1,i=void 0;try{for(var s,l=a[Symbol.iterator]();!(n=(s=l.next()).done);n=!0)(0,s.value)(t,this)}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}}}},{key:"socketEmit",value:function(e,t){this.socket.emit(e,t)}},{key:"addAi",value:function(e){this.socketEmit("party",{event:"addAi",token:this.token,playerId:this.player.id,partyId:this.party.partyId,playerName:e})}},{key:"gameRequest",value:function(e){this.socketEmit("game",{token:this.token,partyId:this.party.partyId,playerId:this.player.id,request:e})}},{key:"createParty",value:function(e,t){this.socketEmit("party",{event:"create",gameId:t,playerName:e})}},{key:"joinParty",value:function(e,t){this.socketEmit("party",{event:"join",partyId:t,playerName:e})}},{key:"kickPlayer",value:function(e){this.socketEmit("party",{event:"kickPlayer",token:this.token,partyId:this.party.partyId,playerId:e})}},{key:"gameInitReady",value:function(){this.socketEmit("party",{event:"gameInitReady",token:this.token,partyId:this.party.partyId,playerId:this.player.id})}},{key:"playerReady",value:function(){this.socketEmit("party",{event:"playerReady",token:this.token,partyId:this.party.partyId,playerId:this.player.id})}},{key:"playerUnready",value:function(){this.socketEmit("party",{event:"playerUnready",token:this.token,partyId:this.party.partyId,playerId:this.player.id})}},{key:"startGame",value:function(){this.socketEmit("party",{event:"startGame",token:this.token,partyId:this.party.partyId,playerId:this.player.id})}}])&&Z(t.prototype,a),n&&Z(t,n),e}();function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ie=function(e){function t(e){var a,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=!(r=ae(t).call(this,e))||"object"!==ee(r)&&"function"!=typeof r?ne(n):r;var i="https://0.playplayplay.ml",s=localStorage.getItem("endpoint");return localStorage&&s&&(i=s),a.client=new $(i),a.state={gameModalShow:!0,partyModalShow:!1,playground:!1,gameInitReadyList:!1,playerReadyList:!1},a.startGame=a.startGame.bind(ne(a)),a.joinGame=a.joinGame.bind(ne(a)),a.listen(),a}var a,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,e),a=t,(n=[{key:"componentDidMount",value:function(){if(window.location.search&&7===window.location.search.length){var e=prompt("Enter your nickname:");this.client.joinParty(e,window.location.search.substring(1,7)),this.setState({gameModalShow:!1})}}},{key:"listen",value:function(){var e=this;this.client.on("party",(function(t){if(e.setState({party:e.client.party}),"gameInitReady"===t.event)e.setState({gameInitReadyList:e.client.gameInitReadyList});else if("playerReady"===t.event)e.setState({playerReadyList:e.client.playerReadyList});else if("startGame"===t.event)e.setState({gameModalShow:!1,partyModalShow:!1});else if(e.client.party&&e.client.party.gameId&&("partyJoined"===t.event||"gameChanged"===t.event))e.state.playground?e.setState({awaitChangeGame:!0}):(e.setState({gameModalShow:!1,partyModalShow:!0}),e.updatePlayground());else if(t.event&&t.event.endsWith("Failed")){if(console.error(t),-4===t.code)return;alert("Code: "+t.code+"\nError: "+t.msg)}}))}},{key:"updatePlayground",value:function(){var e,t=this;this.setState({playgroundBootDone:!1,playground:r.a.createElement((e=this.client.party.gameId,q[e].instance),{party:this.state.party,client:this.client,onBootDone:function(){console.log("Bootdone"),t.setState({playgroundBootDone:!0}),t.client.gameInitReady()},onDisable:function(){t.setState({gameModalShow:!1,partyModalShow:!0,playground:!1,playgroundBootDone:!1}),t.state.awaitChangeGame&&(t.setState({awaitChangeGame:!1}),t.updatePlayground())}})})}},{key:"joinGame",value:function(){var e=document.getElementById("nickname-field").value,t=document.getElementById("party-code-field").value;e&&""!==e?t&&""!==t&&6===t.length?(this.client.joinParty(e,t),this.setState({gameModalShow:!1})):alert("Party Code Invalid."):alert("Please fill in your nickname.")}},{key:"startGame",value:function(e){if(function(e){return void 0!==q[e]}(e)){document.getElementById("local-mode-switch").checked;var t=document.getElementById("nickname-field").value;t&&""!==t?(this.client.createParty(t,e),this.setState({gameModalShow:!1})):alert("Please fill in your nickname.")}else alert("The selected game is currently unavailable.")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.playground,r.a.createElement(V,{show:this.state.gameModalShow,onHide:function(){return e.setState({gameModalShow:!1})},startGame:this.startGame,joinGame:this.joinGame}),this.state.partyModalShow&&r.a.createElement(X,{show:this.state.partyModalShow,onHide:function(){return e.setState({partyModalShow:!1})},client:this.client,playerReadyList:this.state.playerReadyList,gameInitReadyList:this.state.gameInitReadyList,party:this.state.party,player:this.client.player,playgroundBootDone:this.state.playgroundBootDone}))}}])&&te(a.prototype,n),i&&te(a,i),t}(r.a.Component);s.a.render(r.a.createElement(ie,null),document.getElementById("root"))},17:function(e,t){e.exports={SUIT:["diamonds","clubs","hearts","spades"],RANK:["3","4","5","6","7","8","9","10","jack","queen","king","ace","2"],COMBINATIONS:["pair","threeOfAKind","fiveCardHands"],FIVE_CARD_HANDS:["straight","flush","fullHouse","fourOfAKind","straightFlush"]}},27:function(e,t,a){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=a(52),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"findAll",value:function(e){var t={pair:[],threeOfAKind:[],straight:[],flush:[],fullHouse:[],fourOfAKind:[],straightFlush:[]};if(e.length<2)return t;var a=this.deckToCards(e);return t.pair=this.findPair(a),t.threeOfAKind=this.findThreeOfAKind(a),t.straight=this.findStraight(a),t.flush=this.findFlush(a),t.fullHouse=this.findFullHouse(a),t.fourOfAKind=this.findFourOfAKind(a),t.straightFlush=this.findStraightFlush(a),t}},{key:"findPair",value:function(e){return this.byRankSame(e,2)}},{key:"findThreeOfAKind",value:function(e){return this.byRankSame(e,3)}},{key:"findStraight",value:function(e){return this.byRankConsecutive(e,5)}},{key:"findFlush",value:function(e){return this.bySuitSame(e,5)}},{key:"findFullHouse",value:function(e){var t=this;return this.byRankSameWithExternal(e,3,(function(e,a,n){var r,i,s=t.findPair(a);for(i=0;i<s.length;i++)r=(r=n.slice()).concat(s[i]),e.push(r)}))}},{key:"findFourOfAKind",value:function(e){return this.byRankSameWithExternal(e,4,(function(e,t,a){var n,r;for(r=0;r<t.length;r++)(n=a.slice()).push(t[r]),e.push(n)}))}},{key:"byRankSameWithExternal",value:function(e,t,a){var n,r,i,s,l=[],o=this.byRankSame(e,t);for(r=0;r<o.length;r++){for(n=e.slice(),i=0;i<o[r].length;i++)for(s=0;s<n.length;s++)if(n[s].card.equals(o[r][i].card)){n.splice(s,1);break}a(l,n,o[r])}return l}},{key:"findStraightFlush",value:function(e){var t,a,n,r=this.findStraight(e),i=[];for(t=0;t<r.length;t++)for(n=0,a=1;a<r[t].length&&r[t][a].card.suit===r[t][a-1].card.suit;a++)4==++n&&i.push(r[t]);return i}},{key:"byRankSame",value:function(e,t){return this.sameCombinations(e,t,"getRankSize")}},{key:"bySuitSame",value:function(e,t){return this.sameCombinations(e,t,"getSuitSize")}},{key:"sameCombinations",value:function(e,t,a){var n,r,i,s,l,o=[];for(e.sort((function(e,t){var n=e.card[a](),r=t.card[a]();return n<r?-1:n>r?1:0})),n=0;n<e.length-(t-1);n++)for(s=0,r=n+1;r<e.length&&e[r-1].card[a]()===e[r].card[a]();r++)if(++s==t-1){for(l=[],i=n;i<n+t;i++)l.push(e[i]);o.push(l);break}return o}},{key:"byRankConsecutive",value:function(e,t){var a,n,r,i,s,l=[];for(e.sort((function(e,t){var a=e.card.getRankSize(),n=t.card.getRankSize();return a<n?-1:a>n?1:0})),a=0;a<e.length-(t-1);a++)for(i=0,n=a+1;n<e.length&&e[n-1].card.getRankSize()===e[n].card.getRankSize()-1;n++)if(++i==t-1){for(s=[],r=a;r<a+t;r++)s.push(e[r]);l.push(s);break}return l}},{key:"sortByRank",value:function(e){this.sortDeckSuits(e),this.sortDeckRanks(e)}},{key:"sortBySuit",value:function(e){this.sortDeckRanks(e),this.sortDeckSuits(e)}},{key:"sortDeckRanks",value:function(e){e.sort((function(e,t){var a=e.getRankSize(),n=t.getRankSize();return a<n?-1:a>n?1:0}))}},{key:"sortDeckSuits",value:function(e){e.sort((function(e,t){var a=e.getSuitSize(),n=t.getSuitSize();return a<n?-1:a>n?1:0}))}},{key:"deckToCards",value:function(e){var t,a=[];for(t=0;t<e.length;t++)a.push({index:t,card:e[t]});return a}},{key:"cardsToDeck",value:function(e){var t,a=[];for(t=0;t<e.length;t++)a.push(e[t].card);return a}},{key:"jsonToCards",value:function(e){var t,a=[];for(t=0;t<e.length;t++)a.push(new r(e[t].suit,e[t].rank));return a}}])&&n(t.prototype,a),i&&n(t,i),e}();e.exports=i},37:function(e,t,a){var n=a(27),r=a(17),i=a(93);e.exports=function(e){var t,a=new n,s=!1;if(1===e.length)t="single";else{var l,o,c=a.findAll(e);if(console.log(c),t=!1,5===e.length){var u=!1;for(l=r.FIVE_CARD_HANDS.length-1;l>=0;l--)if(c[o=r.FIVE_CARD_HANDS[l]].length>0){s=o,u=!0;break}u&&(t="fiveCardHands")}else 3===e.length?c.threeOfAKind.length>0&&(t="threeOfAKind"):2===e.length&&c.pair.length>0&&(t="pair");if(!t)return!1}return new i(t,e,s)}},52:function(e,t,a){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=a(17),i=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.suit=t,this.rank=a}var t,a,i;return t=e,(a=[{key:"getSuitSize",value:function(){return r.SUIT.indexOf(this.suit)}},{key:"getRankSize",value:function(){return r.RANK.indexOf(this.rank)}},{key:"compare",value:function(e){var t=r.RANK.indexOf(this.rank),a=r.RANK.indexOf(e.rank);if(t<a)return-1;if(t>a)return 1;var n=r.SUIT.indexOf(this.suit),i=r.SUIT.indexOf(e.suit);return n<i?-1:n>i?1:0}},{key:"equals",value:function(e){return this.suit===e.suit&&this.rank===e.rank}}])&&n(t.prototype,a),i&&n(t,i),e}();e.exports=i},86:function(e,t){},93:function(e,t,a){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=a(17),i=(a(27),function(){function e(t,a,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cards=a,this.combinationName=t,this.fiveCardName=n}var t,a,i;return t=e,(a=[{key:"getRankSize",value:function(){var e,t=0;for(e=0;e<this.cards.length;e++)t+=this.cards[e].getRankSize();return t}},{key:"getSuitSize",value:function(){var e,t=0;for(e=0;e<this.cards.length;e++)t+=this.cards[e].getSuitSize();return t}},{key:"compare",value:function(e){if(this.cards.length!==e.cards.length||this.combinationName!==e.combinationName)throw new Error("The two combinations' length/types are not the same. They cannot be compared.");if(5===this.cards.length&&5===e.cards.length){var t=r.FIVE_CARD_HANDS.indexOf(this.combinationName),a=r.FIVE_CARD_HANDS.indexOf(this.combinationName);if(t<a)return-1;if(t>a)return 1}var n=this.getRankSize(),i=e.getRankSize();if(n<i)return-1;if(n>i)return 1;var s=this.getSuitSize(),l=e.getSuitSize();return s<l?-1:s>l?1:0}}])&&n(t.prototype,a),i&&n(t,i),e}());e.exports=i},94:function(e,t,a){var n=a(24),r=a(95);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1},s=(n(e.i,r,i),r.locals?r.locals:{});e.exports=s},95:function(e,t,a){var n=a(25),r=a(96),i=a(97);t=n(!1);var s=r(i);t.push([e.i,".board {\r\n    position: fixed;\r\n    left: calc(50% - 50em);\r\n    top: calc(50% - 28.125em);\r\n    width: 100em;\r\n    height: 56.25em;\r\n}\r\n\r\n.board .playingcards {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n}\r\n\r\n.board .playingcards .playingcard {\r\n    position: absolute;\r\n    width: 6.25em;\r\n    height: 9.08em;\r\n    top: -4.54em;\r\n    left: -3.125em;\r\n    background-size: cover;\r\n    background-image: url("+s+");\r\n    transition: all 0.5s ease-in-out;\r\n    -webkit-transform-origin: 50% 50%;\r\n    -moz-transform-origin: 50% 50%;\r\n    -o-transform-origin: 50% 50%;\r\n    -ms-transform-origin: 50% 50%;\r\n\ttransform-origin: 50% 50%;\r\n}\r\n\r\n.combination-buttons {\r\n    position: absolute;\r\n    left: -24em;\r\n    top: 6em;\r\n    z-index: 53;\r\n}\r\n\r\n.combination-buttons button {\r\n    padding: .75rem 1.5rem;\r\n    font-size: 1.5rem;\r\n    line-height: 1;\r\n    border-radius: .45rem;\r\n    white-space: nowrap;\r\n}\r\n\r\n.turn-buttons {\r\n    position: absolute;\r\n    left: -12em;\r\n    top: 2em;\r\n    z-index: 53;\r\n}\r\n\r\n.turn-buttons button {\r\n    padding: .75rem 1.5rem;\r\n    font-size: 1.5rem;\r\n    line-height: 1;\r\n    border-radius: .45rem;\r\n    white-space: nowrap;\r\n}\r\n\r\n.player1 {\r\n    position: absolute;\r\n    left: -31em;\r\n    top: -5.5em;\r\n    font-size: 1.5rem;\r\n    white-space: nowrap;\r\n}\r\n\r\n.player2 {\r\n    position: absolute;\r\n    left: 3em;\r\n    top: -13em;\r\n    font-size: 1.5rem;\r\n    white-space: nowrap;\r\n}\r\n\r\n.player3 {\r\n    position: absolute;\r\n    left: 27em;\r\n    top: -5.5em;\r\n    font-size: 1.5rem;\r\n    white-space: nowrap;\r\n}\r\n\r\n.waiting-players {\r\n    position: absolute;\r\n    left: -4.5em;\r\n    top: -1em;\r\n    font-size: 2.5rem;\r\n    white-space: nowrap;\r\n}\r\n\r\n.left-player-passed {\r\n    position: absolute;\r\n    left: -12em;\r\n    top: -1em;\r\n    font-size: 3rem;\r\n    white-space: nowrap;\r\n}\r\n\r\n.right-player-passed {\r\n    position: absolute;\r\n    left: 9em;\r\n    top: -1em;\r\n    font-size: 3rem;\r\n    white-space: nowrap;\r\n}\r\n\r\n.top-player-passed {\r\n    position: absolute;\r\n    left: -1.5em;\r\n    top: -3em;\r\n    font-size: 3rem;\r\n    white-space: nowrap;\r\n}\r\n\r\n.bottom-player-passed {\r\n    position: absolute;\r\n    left: -1.5em;\r\n    top: 0.5em;\r\n    font-size: 3rem;\r\n    white-space: nowrap;\r\n}",""]),e.exports=t},97:function(e,t,a){"use strict";a.r(t),t.default=a.p+"f956b6d85f78462ab4adc75933f408cb.svg"},98:function(e,t,a){var n=a(24),r=a(99);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1},s=(n(e.i,r,i),r.locals?r.locals:{});e.exports=s},99:function(e,t,a){(t=a(25)(!1)).push([e.i,".guessnum-home-screen {\r\n    height: 90vh;\r\n}\r\n\r\nbody.guessnum-correct {\r\n    background-color: rgb(166, 255, 168)\r\n}",""]),e.exports=t}},[[110,1,2]]]);
//# sourceMappingURL=app.f613fbc4a278e7389185.js.map